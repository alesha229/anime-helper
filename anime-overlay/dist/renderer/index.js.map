{
  "version": 3,
  "sources": ["../../src/config.ts", "../../src/utils/utils.ts", "../../src/renderer/modelStore.ts", "../../src/renderer/live2d/live2dutils.ts", "../../src/renderer/lipsync/lipsyncState.ts", "../../src/renderer/modelIterations/motionState.ts", "../../src/renderer/live2d/live2dLoader.ts", "../../src/renderer/index.ts"],
  "sourcesContent": ["export const config = {\r\n  MODELS: [\r\n    \"./models/adaerbote_2/adaerbote_2.model3.json\",\r\n    \"./models/dafeng_6/dafeng_6.model3.json\",\r\n    \"https://raw.githubusercontent.com/Eikanya/Live2d-model/master/%E7%A2%A7%E8%93%9D%E8%88%AA%E7%BA%BF%20Azue%20Lane/Azue%20Lane(JP)/abeikelongbi_3/abeikelongbi_3.model3.json\",\r\n    \"https://cdn.jsdelivr.net/gh/Eikanya/Live2d-model/Live2D/haru/haru_greeter_t03.model3.json\",\r\n  ],\r\n  LAST_MODEL_KEY: \"anime_overlay_last_model_url\",\r\n  GITHUBRAW: \"https://raw.githubusercontent.com\",\r\n};\r\n", "// \u0423\u0442\u0438\u043B\u0438\u0442\u044B \u0434\u043B\u044F \u0440\u0430\u0431\u043E\u0442\u044B \u0441 \u043F\u0443\u0442\u044F\u043C\u0438, \u0441\u0442\u0440\u043E\u043A\u0430\u043C\u0438, \u043C\u0430\u0441\u0441\u0438\u0432\u0430\u043C\u0438 \u0438 \u043B\u043E\u0433\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435\u043C\r\n\r\nexport function makeAbsolute(baseUrl: string, relative: string): string {\r\n  try {\r\n    if (!relative) return relative;\r\n    if (/^https?:\\/\\//i.test(relative)) return relative;\r\n    const base = baseUrl.replace(/[^/]+$/, \"\");\r\n    return new URL(relative, base).toString();\r\n  } catch {\r\n    return relative;\r\n  }\r\n}\r\n\r\nexport function toAbsoluteAssetUrl(\r\n  modelJsonUrl: string,\r\n  assetPath: string\r\n): string {\r\n  if (!assetPath) return assetPath;\r\n  if (/^https?:/i.test(assetPath) || assetPath.startsWith(\"data:\"))\r\n    return assetPath;\r\n  try {\r\n    const base = modelJsonUrl.replace(/\\/[^/]*$/, \"/\");\r\n    return new URL(assetPath, base).href;\r\n  } catch {\r\n    return assetPath;\r\n  }\r\n}\r\n\r\nexport function encodeRepoPath(path: string): string {\r\n  return (path || \"\")\r\n    .split(\"/\")\r\n    .map((seg) => encodeURIComponent(seg))\r\n    .join(\"/\");\r\n}\r\n\r\nexport function buildRepoPath(path: string, name: string): string {\r\n  return (path ? path + \"/\" : \"\") + name;\r\n}\r\n\r\nexport function sayRandom<T>(list: T[]): T | null {\r\n  try {\r\n    if (!Array.isArray(list) || !list.length) return null;\r\n    const pick = list[Math.floor(Math.random() * list.length)];\r\n    return pick;\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function ping(url: string): Promise<boolean> {\r\n  try {\r\n    const r = await fetch(url, { method: \"HEAD\" });\r\n    return r.ok;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport function log(...args: any[]): void {\r\n  if (typeof window !== \"undefined\" && window.console) {\r\n    window.console.log(\"[utils]\", ...args);\r\n  }\r\n}\r\nwindow.addEventListener(\"keydown\", (e) => {\r\n  if (e.key === \"F12\" && window.overlayAPI && window.overlayAPI.openDevTools)\r\n    window.overlayAPI.openDevTools();\r\n});\r\n", "let model: any = null;\r\n\r\nexport function getModel() {\r\n  return model;\r\n}\r\n\r\nexport function setModel(m: any) {\r\n  model = m;\r\n}\r\n", "import { getModel, setModel } from \"../modelStore\";\r\nimport { app } from \"../index\";\r\n\r\nexport function fitModelToCanvas() {\r\n  const model = getModel();\r\n  if (!model) return;\r\n  try {\r\n    if (model.anchor && typeof model.anchor.set === \"function\") {\r\n      model.anchor.set(0.5, 0.5);\r\n    }\r\n  } catch {}\r\n  try {\r\n    const userMoved = !!(model as any).__userMoved;\r\n    if (!userMoved) {\r\n      model.x = app.renderer.width / 2;\r\n      model.y = app.renderer.height / 2;\r\n    }\r\n    const b = model.getBounds();\r\n    const bw = Math.max(1, b.width);\r\n    const bh = Math.max(1, b.height);\r\n    // Slightly smaller than strict fit to avoid oversizing in index view\r\n    const fudge = 0.5;\r\n    const base = Math.min(\r\n      (app.renderer.width * 0.4) / bw,\r\n      (app.renderer.height * 0.4) / bh\r\n    );\r\n    const baseScale = Math.max(0.1, base * fudge);\r\n    (window as any).__live2d_base_scale = baseScale;\r\n    let factor = 1;\r\n    try {\r\n      const input = document.getElementById(\r\n        \"opacity\"\r\n      ) as HTMLInputElement | null;\r\n      if (input)\r\n        factor = Math.max(0.5, Math.min(1.5, Number(input.value) || 1));\r\n    } catch {}\r\n    const userScaled = !!(model as any).__userScaled;\r\n    if (!userScaled) {\r\n      if (isFinite(baseScale) && baseScale > 0) {\r\n        const conservative = 0.85;\r\n        model.scale.set(baseScale * factor * conservative);\r\n      }\r\n    }\r\n  } catch {}\r\n}\r\nexport async function preloadMotionsFromModelJson(modelJsonUrl: string) {\r\n  try {\r\n    const resp = await fetch(modelJsonUrl);\r\n    if (!resp.ok) throw new Error(\"HTTP \" + resp.status);\r\n    const json = await resp.json();\r\n    const base = modelJsonUrl.replace(/[^/]+$/, \"\");\r\n    const motions = json.motions || {};\r\n    const groups = Object.keys(motions);\r\n    const files = [];\r\n    for (const g of groups) {\r\n      const arr = motions[g] || [];\r\n      for (const item of arr) {\r\n        if (item && item.file) files.push(base + item.file);\r\n      }\r\n    }\r\n    for (const f of files) {\r\n      try {\r\n        await fetch(f);\r\n      } catch (e) {}\r\n    }\r\n    return groups;\r\n  } catch (e) {\r\n    console.warn(\"preloadMotionsFromModelJson failed\", e);\r\n    return [];\r\n  }\r\n}\r\nexport function resizeStageToContainer() {\r\n  try {\r\n    const modelContainerEl = document.getElementById(\"model\");\r\n    const w = (modelContainerEl && modelContainerEl.clientWidth) || 320;\r\n    const h = (modelContainerEl && modelContainerEl.clientHeight) || 480;\r\n    app.renderer.resize(w, h);\r\n    fitModelToCanvas();\r\n  } catch {}\r\n}\r\nexport function stateKeyFor(url: string): string {\r\n  return \"live2d_model_state::\" + encodeURIComponent(String(url || \"\"));\r\n}\r\n", "let lipSyncState = {\r\n  stream: null,\r\n  audioContext: null,\r\n  source: null,\r\n  analyser: null,\r\n  data: null,\r\n  raf: null,\r\n  lipSyncEnabled: true,\r\n};\r\nexport function getLipSyncState() {\r\n  return lipSyncState;\r\n}\r\n\r\nexport function setLipSyncState(state: any) {\r\n  lipSyncState = state;\r\n}\r\n", "let motionEntries: any = [];\r\nlet availableGroups: any = [];\r\nexport function getmotionEntries() {\r\n  return motionEntries;\r\n}\r\n\r\nexport function setmotionEntries(state: any) {\r\n  motionEntries = state;\r\n}\r\n\r\nexport function getavailableGroups() {\r\n  return availableGroups;\r\n}\r\n\r\nexport function setavailableGroups(state: any) {\r\n  availableGroups = state;\r\n}\r\n", "/* eslint-disable */\r\n// @ts-nocheck\r\n// Shared Live2D model loader used by both viewer and index renderers\r\n// This module encapsulates robust runtime detection, settings rewriting,\r\n// CDN fallbacks, and PIXI stage attachment.\r\n\r\nimport { app } from \"../index\";\r\nimport { config } from \"../../config\";\r\nconst MODELS = config.MODELS;\r\nconst LAST_MODEL_KEY = config.LAST_MODEL_KEY;\r\nimport {\r\n  makeAbsolute,\r\n  toAbsoluteAssetUrl,\r\n  encodeRepoPath,\r\n  buildRepoPath,\r\n  sayRandom,\r\n  ping,\r\n  log,\r\n} from \"../../utils/utils\";\r\nimport { stateKeyFor } from \"./live2dutils\";\r\nimport { getModel, setModel } from \"../modelStore\";\r\nimport { getLipSyncState, setLipSyncState } from \"../lipsync/lipsyncState\";\r\nimport {\r\n  getmotionEntries,\r\n  setmotionEntries,\r\n  getavailableGroups,\r\n  setavailableGroups,\r\n} from \"../modelIterations/motionState\";\r\nlet __loadedRuntime: \"c2\" | \"c4\" | null = null;\r\nlet __live2d_patches_installed = false;\r\n\r\nasync function loadScript(src: string): Promise<void> {\r\n  await new Promise<void>((res, rej) => {\r\n    const s = document.createElement(\"script\");\r\n    s.src = src;\r\n    s.onload = () => res();\r\n    s.onerror = () => rej(new Error(\"Failed to load \" + src));\r\n    document.head.appendChild(s);\r\n  });\r\n}\r\n\r\nfunction getAlternativeURL(u: string): string {\r\n  try {\r\n    if (u.includes(\"cdn.jsdelivr.net/gh/\")) {\r\n      const m = u.match(\r\n        /cdn\\.jsdelivr\\.net\\/gh\\/([^@/]+)\\/([^@/]+)@[^/]+\\/(.+)$/\r\n      );\r\n      if (m)\r\n        return `https://raw.githubusercontent.com/${m[1]}/${m[2]}/master/${m[3]}`;\r\n    }\r\n    if (u.includes(\"raw.githubusercontent.com/\")) {\r\n      const m = u.match(\r\n        /raw\\.githubusercontent\\.com\\/([^/]+)\\/([^/]+)\\/[^/]+\\/(.+)$/\r\n      );\r\n      if (m)\r\n        return `https://cdn.jsdelivr.net/gh/${m[1]}/${m[2]}@master/${m[3]}`;\r\n    }\r\n  } catch {}\r\n  return u;\r\n}\r\n\r\nasync function loadJson5IfNeeded(): Promise<any | null> {\r\n  try {\r\n    if ((window as any).JSON5) return (window as any).JSON5;\r\n  } catch {}\r\n  try {\r\n    await loadScript(\r\n      \"https://cdn.jsdelivr.net/npm/json5@2.2.3/dist/index.min.js\"\r\n    );\r\n    return (window as any).JSON5 || null;\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction installLive2dPatches(ns: any) {\r\n  if (!ns || __live2d_patches_installed) return;\r\n  try {\r\n    const Loader = ns.Live2DLoader;\r\n    const XHR = ns.XHRLoader;\r\n    if (Loader && XHR && Array.isArray(Loader.middlewares)) {\r\n      const idx = Loader.middlewares.indexOf(XHR.loader);\r\n      if (idx >= 0) {\r\n        const orig = XHR.loader;\r\n        Loader.middlewares[idx] = async (context: any, next: any) => {\r\n          const url = context.settings\r\n            ? context.settings.resolveURL(context.url)\r\n            : context.url;\r\n          try {\r\n            await orig(context, next);\r\n            return;\r\n          } catch (e: any) {\r\n            if (\r\n              !(\r\n                e &&\r\n                e.status === 403 &&\r\n                typeof url === \"string\" &&\r\n                url.includes(\"jsdelivr\")\r\n              )\r\n            )\r\n              throw e;\r\n          }\r\n          try {\r\n            context.url = getAlternativeURL(url);\r\n          } catch {}\r\n          await orig(context, next);\r\n          return next();\r\n        };\r\n      }\r\n    }\r\n  } catch {}\r\n  try {\r\n    const Factory = ns.Live2DFactory;\r\n    if (Factory && Array.isArray(Factory.live2DModelMiddlewares)) {\r\n      const idx = Factory.live2DModelMiddlewares.indexOf(Factory.urlToJSON);\r\n      if (idx >= 0) {\r\n        Factory.live2DModelMiddlewares[idx] = async (\r\n          context: any,\r\n          next: any\r\n        ) => {\r\n          if (typeof context.source === \"string\") {\r\n            let url = context.source as string;\r\n            let text: string | null = null;\r\n            try {\r\n              const r1 = await fetch(url);\r\n              text = await r1.text();\r\n            } catch {}\r\n            try {\r\n              if (!text || /^\\s*<!DOCTYPE|<html/i.test(text)) {\r\n                const alt = getAlternativeURL(url);\r\n                if (alt && alt !== url) {\r\n                  const r2 = await fetch(alt);\r\n                  const t2 = await r2.text();\r\n                  if (t2) {\r\n                    text = t2;\r\n                    url = alt;\r\n                  }\r\n                }\r\n              }\r\n            } catch {}\r\n            if (!text) throw new Error(\"Failed to fetch settings JSON\");\r\n            let json: any = null;\r\n            try {\r\n              json = JSON.parse(text);\r\n            } catch {\r\n              try {\r\n                const JSON5 = await loadJson5IfNeeded();\r\n                if (JSON5) json = JSON5.parse(text);\r\n              } catch {}\r\n            }\r\n            if (!json) throw new Error(\"Failed to parse settings JSON\");\r\n            try {\r\n              json.url = url;\r\n            } catch {}\r\n            context.source = json;\r\n            try {\r\n              context.live2dModel?.emit?.(\"settingsJSONLoaded\", json);\r\n            } catch {}\r\n          }\r\n          return next();\r\n        };\r\n      }\r\n    }\r\n  } catch {}\r\n  __live2d_patches_installed = true;\r\n}\r\n\r\nasync function ensureCubism4(): Promise<void> {\r\n  if (!(window as any).Live2DCubismCore) {\r\n    await loadScript(\"./vendor/live2dcubismcore.min.js\");\r\n  }\r\n  if (!(window as any).__live2d_api_c4) {\r\n    await loadScript(\"./vendor/cubism4.min.js\");\r\n    try {\r\n      (window as any).__live2d_api_c4 = (PIXI as any).live2d;\r\n      __loadedRuntime = \"c4\";\r\n      try {\r\n        (window as any).__loadedRuntime = \"c4\";\r\n      } catch {}\r\n    } catch {}\r\n  }\r\n  try {\r\n    installLive2dPatches(\r\n      (window as any).__live2d_api_c4 || (PIXI as any).live2d\r\n    );\r\n  } catch {}\r\n}\r\n\r\nasync function ensureCubism2(): Promise<void> {\r\n  if (!(window as any).Live2D) {\r\n    await loadScript(\"./vendor/live2d.min.js\");\r\n  }\r\n  if (!(window as any).__live2d_api_c2) {\r\n    await loadScript(\"./vendor/cubism2.min.js\");\r\n    try {\r\n      (window as any).__live2d_api_c2 = (PIXI as any).live2d;\r\n      __loadedRuntime = \"c2\";\r\n      try {\r\n        (window as any).__loadedRuntime = \"c2\";\r\n      } catch {}\r\n    } catch {}\r\n  }\r\n  try {\r\n    installLive2dPatches(\r\n      (window as any).__live2d_api_c2 || (PIXI as any).live2d\r\n    );\r\n  } catch {}\r\n}\r\n\r\nexport function detectUseV4FromUrl(u: string | null): boolean | null {\r\n  try {\r\n    if (!u) return null;\r\n    const low = u.toLowerCase();\r\n    if (/(^|\\/)model3\\.json(\\?|$)/.test(low)) return true;\r\n    if (/(^|\\/)model\\.json(\\?|$)/.test(low)) return false;\r\n  } catch {}\r\n  return null;\r\n}\r\n\r\nexport function detectRuntimeByUrl(u: string | null): boolean | null {\r\n  try {\r\n    if (!u) return null;\r\n    const low = u.toLowerCase();\r\n    if (/\\.model3\\.json(\\?|$)/.test(low) || /\\.moc3(\\?|$)/.test(low))\r\n      return true;\r\n    if (/\\.model\\.json(\\?|$)/.test(low) || /\\.moc(\\?|$)/.test(low))\r\n      return false;\r\n    if (/\\.json(\\?|$)/.test(low)) return false;\r\n  } catch {}\r\n  return null;\r\n}\r\n\r\nfunction rewriteModelJsonUrls(modelJsonUrl: string, j: any) {\r\n  try {\r\n    if (j && j.FileReferences) {\r\n      if (j.FileReferences.Moc)\r\n        j.FileReferences.Moc = toAbsoluteAssetUrl(\r\n          modelJsonUrl,\r\n          j.FileReferences.Moc\r\n        );\r\n      if (Array.isArray(j.FileReferences.Textures))\r\n        j.FileReferences.Textures = j.FileReferences.Textures.map((t: any) =>\r\n          toAbsoluteAssetUrl(modelJsonUrl, t)\r\n        );\r\n      if (j.FileReferences.Physics)\r\n        j.FileReferences.Physics = toAbsoluteAssetUrl(\r\n          modelJsonUrl,\r\n          j.FileReferences.Physics\r\n        );\r\n      if (j.FileReferences.Motions) {\r\n        for (const g of Object.keys(j.FileReferences.Motions)) {\r\n          const arr = j.FileReferences.Motions[g] || [];\r\n          for (const m of arr)\r\n            if (m.File) m.File = toAbsoluteAssetUrl(modelJsonUrl, m.File);\r\n        }\r\n      }\r\n    }\r\n    if (j) {\r\n      if (j.model) j.model = toAbsoluteAssetUrl(modelJsonUrl, j.model);\r\n      if (Array.isArray(j.textures))\r\n        j.textures = j.textures.map((t: any) =>\r\n          toAbsoluteAssetUrl(modelJsonUrl, t)\r\n        );\r\n      if (j.physics) j.physics = toAbsoluteAssetUrl(modelJsonUrl, j.physics);\r\n      if (j.motions) {\r\n        for (const g of Object.keys(j.motions)) {\r\n          const arr = j.motions[g] || [];\r\n          for (let i = 0; i < arr.length; i++) {\r\n            const m = arr[i];\r\n            if (typeof m === \"string\")\r\n              arr[i] = { file: toAbsoluteAssetUrl(modelJsonUrl, m) };\r\n            else {\r\n              if ((m as any).file)\r\n                (m as any).file = toAbsoluteAssetUrl(\r\n                  modelJsonUrl,\r\n                  (m as any).file\r\n                );\r\n              if ((m as any).File)\r\n                (m as any).File = toAbsoluteAssetUrl(\r\n                  modelJsonUrl,\r\n                  (m as any).File\r\n                );\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  } catch {}\r\n  return j;\r\n}\r\n\r\nasync function loadSettingsJson(\r\n  url: string,\r\n  forceV4?: boolean | null\r\n): Promise<{\r\n  urlOrSettings: any;\r\n  useV4: boolean | null;\r\n  originalUrl: string;\r\n  groups: string[];\r\n}> {\r\n  let useV4 = forceV4 ?? detectUseV4FromUrl(url);\r\n  const byExt = detectRuntimeByUrl(url);\r\n  let groups: string[] = [];\r\n  try {\r\n    const r = await fetch(url, { headers: { Accept: \"application/json\" } });\r\n    const txt = await r.text();\r\n    const j = JSON.parse(txt);\r\n    const cloned = JSON.parse(JSON.stringify(j));\r\n    rewriteModelJsonUrls(url, cloned);\r\n    let isC4 = false;\r\n    try {\r\n      groups = Object.keys(\r\n        j.motions || j.Motions || j.FileReferences?.Motions || {}\r\n      );\r\n    } catch {}\r\n    if (j?.FileReferences?.Moc && /\\.moc3$/i.test(String(j.FileReferences.Moc)))\r\n      isC4 = true;\r\n    if (j?.FileReferences?.Moc && /\\.moc$/i.test(String(j.FileReferences.Moc)))\r\n      isC4 = false;\r\n    if ((j.model || j.textures || j.motions) && !j.FileReferences) isC4 = false;\r\n    if (forceV4 === true) isC4 = true;\r\n    if (forceV4 === false) isC4 = false;\r\n    if (forceV4 == null) {\r\n      if (byExt === true) isC4 = true;\r\n      if (byExt === false) isC4 = false;\r\n    }\r\n    if (isC4) {\r\n      useV4 = true;\r\n      try {\r\n        (cloned as any).url = url;\r\n      } catch {}\r\n      return { urlOrSettings: cloned, useV4, originalUrl: url, groups };\r\n    }\r\n    useV4 = false;\r\n    return { urlOrSettings: url, useV4, originalUrl: url, groups };\r\n  } catch {\r\n    return { urlOrSettings: url, useV4, originalUrl: url, groups };\r\n  }\r\n}\r\n\r\nfunction clearPixiCaches() {\r\n  try {\r\n    const tex = (PIXI.utils && (PIXI.utils as any).TextureCache) || {};\r\n    for (const k of Object.keys(tex)) {\r\n      try {\r\n        tex[k]?.destroy?.(true);\r\n      } catch {}\r\n      delete tex[k];\r\n    }\r\n  } catch {}\r\n  try {\r\n    const btex = (PIXI.utils && (PIXI.utils as any).BaseTextureCache) || {};\r\n    for (const k of Object.keys(btex)) {\r\n      try {\r\n        btex[k]?.destroy?.();\r\n      } catch {}\r\n      delete btex[k];\r\n    }\r\n  } catch {}\r\n}\r\n\r\n// --- Index / repo helpers moved from index.ts ---\r\nconst INDEX_URL =\r\n  \"https://guansss.github.io/live2d-viewer-web/eikanyalive2d-model.json\";\r\nlet modelIndexRoot: any = null;\r\nlet modelInfoMap: any = null;\r\nlet indexPathMap: any = {};\r\nasync function ensureIndexLoaded() {\r\n  if (modelIndexRoot && modelInfoMap) return;\r\n  const resp = await fetch(INDEX_URL);\r\n  if (!resp.ok) throw new Error(\"Failed to load model index\");\r\n  const data = await resp.json();\r\n  modelIndexRoot = data.models;\r\n  modelInfoMap = {};\r\n  for (const k of Object.keys(data)) {\r\n    if (k !== \"models\") modelInfoMap[k] = data[k];\r\n  }\r\n  indexPathMap = {};\r\n  (function build(node: any, prefix: string) {\r\n    const path = prefix || \"\";\r\n    indexPathMap[path] = node;\r\n    const children = (node && node.children) || [];\r\n    for (const ch of children) {\r\n      if (!ch || !ch.name) continue;\r\n      const next = path ? path + \"/\" + ch.name : ch.name;\r\n      build(ch, next);\r\n    }\r\n  })(modelIndexRoot, \"\");\r\n}\r\nfunction indexRootName() {\r\n  return (modelIndexRoot && modelIndexRoot.name) || \"Eikanya/Live2d-model\";\r\n}\r\nfunction findIndexNode(path: string) {\r\n  return indexPathMap[path || \"\"] || null;\r\n}\r\nfunction listDirFromIndex(path: string) {\r\n  const node = findIndexNode(path);\r\n  return {\r\n    dirs: (node && node.children) || [],\r\n    files: (node && node.files) || [],\r\n  };\r\n}\r\nfunction urlToRepoPath(url: string) {\r\n  try {\r\n    const u = new URL(url);\r\n    if (u.hostname === \"raw.githubusercontent.com\") {\r\n      const parts = u.pathname.split(\"/\").filter(Boolean);\r\n      return decodeURIComponent(parts.slice(3).join(\"/\"));\r\n    }\r\n    if (u.hostname === \"cdn.jsdelivr.net\") {\r\n      const m = u.pathname.match(/\\/gh\\/Eikanya\\/Live2d-model@[^/]+\\/(.*)$/);\r\n      if (m) return decodeURIComponent(m[1]);\r\n    }\r\n  } catch {}\r\n  return null;\r\n}\r\nasync function resolveModelUrl(repoPath: string) {\r\n  const tries = [\r\n    pathToJsDelivr(repoPath, \"master\"),\r\n    pathToJsDelivr(repoPath, \"v1.0.0\"),\r\n    pathToRaw(repoPath, \"master\"),\r\n    pathToRaw(repoPath, \"v1.0.0\"),\r\n  ];\r\n  for (const url of tries) {\r\n    try {\r\n      const r = await fetch(url, { method: \"HEAD\" });\r\n      if (r.ok) return url;\r\n    } catch {}\r\n  }\r\n  return pathToRaw(repoPath, \"master\");\r\n}\r\nfunction pathToJsDelivr(repoPath: string, ref?: string) {\r\n  const encoded = encodeRepoPath(repoPath);\r\n  const suffix = ref ? \"@\" + ref : \"\";\r\n  return (\r\n    \"https://cdn.jsdelivr.net/gh/Eikanya/Live2d-model\" + suffix + \"/\" + encoded\r\n  );\r\n}\r\nfunction pathToRaw(repoPath: string, ref?: string) {\r\n  const encoded = encodeRepoPath(repoPath);\r\n  const branch = ref || \"master\";\r\n  return (\r\n    \"https://raw.githubusercontent.com/Eikanya/Live2d-model/\" +\r\n    branch +\r\n    \"/\" +\r\n    encoded\r\n  );\r\n}\r\nasync function tryFindAlternateModelJsonUrl(originalUrl: string) {\r\n  const baseDir = originalUrl.replace(/[^/]+$/, \"\");\r\n  const tryCandidates = async (names: string[]) => {\r\n    for (const name of names) {\r\n      const cand = baseDir + name;\r\n      try {\r\n        const r = await fetch(cand, { method: \"HEAD\" });\r\n        if (r.ok) return cand;\r\n      } catch {}\r\n    }\r\n    return null;\r\n  };\r\n  const simple = await tryCandidates([\"model.json\", \"model.model.json\"]);\r\n  if (simple) return simple;\r\n  try {\r\n    await ensureIndexLoaded();\r\n    const repoPath = urlToRepoPath(originalUrl);\r\n    if (!repoPath) return null;\r\n    const dir = repoPath.replace(/\\/?[^/]*$/, \"\");\r\n    const node = findIndexNode(dir);\r\n    const files = (node && node.files) || [];\r\n    const sorted = files\r\n      .filter((f: string) => /\\.json$/i.test(f) && !/model3\\.json$/i.test(f))\r\n      .sort((a: string, b: string) =>\r\n        a.toLowerCase() === \"model.json\" ? -1 : 1\r\n      );\r\n    for (const f of sorted) {\r\n      const url = await resolveModelUrl((dir ? dir + \"/\" : \"\") + f);\r\n      try {\r\n        const r = await fetch(url, { method: \"HEAD\" });\r\n        if (r.ok) return url;\r\n      } catch {}\r\n    }\r\n  } catch {}\r\n  return null;\r\n}\r\n\r\nasync function buildSyntheticCubism2Json(repoPathToMoc: string) {\r\n  const key = indexRootName() + \"/\" + repoPathToMoc;\r\n  const meta = modelInfoMap[key] || {};\r\n  const dir = repoPathToMoc.replace(/\\/?[^/]*$/, \"\");\r\n  const modelUrl = await resolveModelUrl(repoPathToMoc);\r\n  const textures = Array.isArray(meta.textures)\r\n    ? meta.textures\r\n    : [\"texture_00.png\"];\r\n  const motionsObj: any = {};\r\n  if (meta.motions) {\r\n    for (const g of Object.keys(meta.motions)) {\r\n      motionsObj[g] = (meta.motions[g] || []).map((m: any) => ({ file: m }));\r\n    }\r\n  }\r\n  const absTextures: string[] = [];\r\n  for (const t of textures)\r\n    absTextures.push(await resolveModelUrl((dir ? dir + \"/\" : \"\") + t));\r\n  const absPhysics = meta.physics\r\n    ? await resolveModelUrl((dir ? dir + \"/\" : \"\") + meta.physics)\r\n    : undefined;\r\n  const json: any = { model: modelUrl, textures: absTextures };\r\n  if (absPhysics) json.physics = absPhysics;\r\n  if (Object.keys(motionsObj).length) json.motions = motionsObj;\r\n  return (\r\n    \"data:application/json;charset=utf-8,\" +\r\n    encodeURIComponent(JSON.stringify(json))\r\n  );\r\n}\r\n\r\nexport async function loadModel(\r\n  app: any,\r\n  url: string,\r\n  forceV4?: boolean | null\r\n) {\r\n  const stageDiv = document.getElementById(\"stage\") as HTMLElement | null;\r\n  try {\r\n    await clearPixiCaches();\r\n    if (getModel()) {\r\n      try {\r\n        app.stage.removeChild(getModel());\r\n        getModel()?.destroy?.(true);\r\n      } catch {}\r\n    }\r\n    setModel(undefined);\r\n  } catch {}\r\n  const { urlOrSettings, useV4, originalUrl, groups } = await loadSettingsJson(\r\n    url,\r\n    forceV4\r\n  );\r\n  try {\r\n    localStorage.setItem(config.LAST_MODEL_KEY, originalUrl);\r\n  } catch {}\r\n  try {\r\n    (window as any).overlayAPI?.saveLastModel?.(originalUrl);\r\n  } catch {}\r\n  try {\r\n    const desired: \"c2\" | \"c4\" | null =\r\n      useV4 === true ? \"c4\" : useV4 === false ? \"c2\" : null;\r\n    if (desired && __loadedRuntime && __loadedRuntime !== desired) {\r\n      (window.location as any).href = `viewer.html`;\r\n      throw new Error(\"Switching runtime requires reload\");\r\n    }\r\n  } catch {}\r\n  if (useV4 === true) await ensureCubism4();\r\n  else if (useV4 === false) await ensureCubism2();\r\n  else await ensureCubism4();\r\n\r\n  let model: any = null;\r\n  const ns = useV4\r\n    ? (window as any).__live2d_api_c4 || (PIXI as any).live2d\r\n    : (window as any).__live2d_api_c2 || (PIXI as any).live2d;\r\n  const prevLive2d = (PIXI as any).live2d;\r\n  (PIXI as any).live2d = ns;\r\n  try {\r\n    model = await (PIXI as any).live2d.Live2DModel.from(urlOrSettings, {\r\n      motionPreload: \"none\",\r\n    });\r\n  } catch {\r\n    try {\r\n      model = await (PIXI as any).live2d.Live2DModel.from(urlOrSettings);\r\n    } catch {\r\n      if (useV4 === false && typeof urlOrSettings === \"string\") {\r\n        try {\r\n          const resp = await fetch(String(urlOrSettings), {\r\n            headers: { Accept: \"application/json\" },\r\n          });\r\n          const txt = await resp.text();\r\n          const j = JSON.parse(txt);\r\n          const cloned = JSON.parse(JSON.stringify(j));\r\n          rewriteModelJsonUrls(String(urlOrSettings), cloned);\r\n          model = await (PIXI as any).live2d.Live2DModel.from(cloned);\r\n        } catch {}\r\n      }\r\n    }\r\n  } finally {\r\n    try {\r\n      (PIXI as any).live2d = prevLive2d;\r\n    } catch {}\r\n  }\r\n  setModel(model);\r\n  try {\r\n    (stageDiv as any).dataset.modelUrl = originalUrl;\r\n  } catch {}\r\n  try {\r\n    // (window as any).__live2d_model = model; // This line is removed as per the edit hint\r\n  } catch {}\r\n  try {\r\n    getModel()?.anchor && getModel().anchor.set(0.5, 0.5);\r\n  } catch {}\r\n  try {\r\n    enableDraggingForModel(app, getModel());\r\n  } catch {}\r\n  app.stage.addChild(getModel());\r\n\r\n  const fitModel = () => {\r\n    if (!getModel()) return;\r\n    getModel().x = app.renderer.width / 2;\r\n    getModel().y = app.renderer.height / 2;\r\n    try {\r\n      const b = getModel().getBounds();\r\n      const scale = Math.min(\r\n        0.9,\r\n        (app.renderer.width * 0.9) / Math.max(1, b.width),\r\n        (app.renderer.height * 0.9) / Math.max(1, b.height)\r\n      );\r\n      if (isFinite(scale) && scale > 0) getModel().scale.set(scale);\r\n    } catch {}\r\n  };\r\n  fitModel();\r\n  return { model, groups, fitModel };\r\n}\r\nexport async function loadSelectedModel(url) {\r\n  const model = getModel();\r\n  if (model) {\r\n    try {\r\n      app.stage.removeChild(model);\r\n      model.destroy(true);\r\n    } catch (e) {}\r\n    if (getLipSyncState().lipSyncEnabled) stopLipSync();\r\n  }\r\n  // reset motions UI and load via viewer-style helper\r\n  setmotionEntries([]);\r\n  // refreshAnimationsUI();\r\n  const byExt = detectRuntimeByUrl(url);\r\n  const res = await loadModel(app, url, byExt);\r\n  setModel(res && (res as any).model ? (res as any).model : null);\r\n  try {\r\n    (window as any).__current_model_url = String(url);\r\n  } catch {}\r\n  setavailableGroups(Array.isArray((res as any)?.groups))\r\n    ? (res as any).groups\r\n    : [];\r\n  // Re-enable interactions now that the model is loaded\r\n  try {\r\n    enableDraggingForModel(model);\r\n  } catch {}\r\n  scheduleGroupRefresh();\r\n  // Try restore previously saved position/scale\r\n  try {\r\n    await restoreModelState();\r\n  } catch {}\r\n  // wait two frames for layout before measuring\r\n  await new Promise((r) =>\r\n    requestAnimationFrame(() => requestAnimationFrame(r))\r\n  );\r\n  // restore old positioning timing: fit and reveal after layout settles\r\n  try {\r\n    fitModelToCanvas();\r\n    if (model) {\r\n      (model as any).alpha = 1;\r\n      (model as any).visible = true;\r\n    }\r\n  } catch {}\r\n  // Save restored/fitted state for consistency\r\n  try {\r\n    saveModelState();\r\n  } catch {}\r\n  // start Idle loop depending on runtime\r\n  try {\r\n    if (currentRuntime === \"c4\") {\r\n      startIdleLoopC4(model);\r\n    } else {\r\n      startIdleLoop(\r\n        model,\r\n        Array.from(\r\n          new Set(\r\n            (getmotionEntries() || []).map((e) => String(e.group || \"\").trim())\r\n          )\r\n        ).filter(Boolean)\r\n      );\r\n    }\r\n  } catch {}\r\n  // Start microphone-driven lipsync automatically\r\n  try {\r\n    await startLipSync();\r\n  } catch {}\r\n}\r\nexport function scheduleGroupRefresh() {\r\n  const model = getModel();\r\n  let attempts = 16;\r\n  const poll = () => {\r\n    if (!model) return;\r\n    try {\r\n      const mm = model.internalModel && model.internalModel.motionManager;\r\n      const groups = getGroupsFromManager(mm);\r\n      if (groups && groups.length) {\r\n        setavailableGroups(\r\n          Array.from(new Set([...(getavailableGroups() || []), ...groups]))\r\n        );\r\n        refreshAnimationsUI();\r\n        return;\r\n      }\r\n    } catch (e) {}\r\n    if (--attempts > 0) setTimeout(poll, 250);\r\n  };\r\n  poll();\r\n}\r\nexport function getGroupsFromManager(mm) {\r\n  try {\r\n    const defs = mm && (mm.definitions || mm._definitions || mm._motions || {});\r\n    return Object.keys(defs || {});\r\n  } catch (e) {\r\n    return [];\r\n  }\r\n}\r\n// --- Drag & Drop \u0434\u043B\u044F Live2D \u043C\u043E\u0434\u0435\u043B\u0438 ---\r\nconst dragState: any = {\r\n  active: false,\r\n  data: null,\r\n  startX: 0,\r\n  startY: 0,\r\n  origX: 0,\r\n  origY: 0,\r\n  target: null,\r\n};\r\n\r\nexport function installStageDragHandlers(app: any, model: any) {\r\n  try {\r\n    if ((app.stage as any).__dragHandlersInstalled) return;\r\n    (app.stage as any).interactive = true;\r\n    const onMove = (ev: any) => {\r\n      try {\r\n        if (!dragState.active || !dragState.data || !dragState.target) return;\r\n        const parent = dragState.target.parent || app.stage;\r\n        const p = dragState.data.getLocalPosition(parent);\r\n        const nx = dragState.origX + (p.x - dragState.startX);\r\n        const ny = dragState.origY + (p.y - dragState.startY);\r\n        dragState.target.position.set(nx, ny);\r\n      } catch {}\r\n    };\r\n    const onUp = () => {\r\n      try {\r\n        if (dragState.target) {\r\n          try {\r\n            (dragState.target as any).__userMoved = true;\r\n          } catch {}\r\n          try {\r\n            (dragState.target as any).cursor = \"grab\";\r\n          } catch {}\r\n          try {\r\n            saveModelState(model);\r\n          } catch {}\r\n        }\r\n        dragState.active = false;\r\n        dragState.data = null;\r\n        dragState.target = null;\r\n      } catch {}\r\n    };\r\n    app.stage.on(\"pointermove\", onMove);\r\n    app.stage.on(\"pointerup\", onUp);\r\n    app.stage.on(\"pointerupoutside\", onUp);\r\n    app.stage.on(\"pointercancel\", onUp as any);\r\n    (app.stage as any).__dragHandlersInstalled = true;\r\n  } catch {}\r\n}\r\nexport function saveModelState(model: any) {\r\n  try {\r\n    const url = getCurrentModelUrl();\r\n    if (!url || !model) return;\r\n    const x = Number((model as any).x) || 0;\r\n    const y = Number((model as any).y) || 0;\r\n    const scale = Number((model as any).scale?.x) || 1;\r\n    try {\r\n      (window as any).overlayAPI?.saveModelState?.(url, x, y, scale);\r\n    } catch {}\r\n    const state = { x, y, scale };\r\n    localStorage.setItem(stateKeyFor(url), JSON.stringify(state));\r\n  } catch {}\r\n}\r\nasync function restoreModelState() {\r\n  try {\r\n    const url = getCurrentModelUrl();\r\n    if (!url || !model) return false;\r\n    let s: any = null;\r\n    try {\r\n      s = await (window as any).overlayAPI?.getModelState?.(url);\r\n    } catch {}\r\n    if (!s) {\r\n      const raw = localStorage.getItem(stateKeyFor(url));\r\n      if (raw) s = JSON.parse(raw || \"null\");\r\n    }\r\n    if (!s || typeof s !== \"object\") return false;\r\n    if (isFinite(Number(s.x)) && isFinite(Number(s.y))) {\r\n      (model as any).x = Number(s.x);\r\n      (model as any).y = Number(s.y);\r\n      try {\r\n        (model as any).__userMoved = true;\r\n      } catch {}\r\n    }\r\n    if (isFinite(Number(s.scale)) && Number(s.scale) > 0) {\r\n      (model as any).scale?.set(Number(s.scale));\r\n      try {\r\n        (model as any).__userScaled = true;\r\n      } catch {}\r\n    }\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport function getCurrentModelUrl(): string {\r\n  try {\r\n    return (\r\n      ((window as any).__current_model_url as string) ||\r\n      localStorage.getItem(LAST_MODEL_KEY) ||\r\n      \"\"\r\n    );\r\n  } catch {\r\n    return \"\";\r\n  }\r\n}\r\nexport function enableDraggingForModel(\r\n  app: any,\r\n  target: any,\r\n  saveModelState: () => void\r\n) {\r\n  if (!target) return;\r\n  installStageDragHandlers(app, target, saveModelState);\r\n  try {\r\n    target.interactive = true;\r\n    (target as any).cursor = \"grab\";\r\n  } catch {}\r\n  const onDown = (event: any) => {\r\n    try {\r\n      dragState.active = true;\r\n      dragState.data = event.data || event;\r\n      dragState.target = target;\r\n      const parent = target.parent || app.stage;\r\n      const p = dragState.data.getLocalPosition(parent);\r\n      dragState.startX = p.x;\r\n      dragState.startY = p.y;\r\n      dragState.origX = target.x;\r\n      dragState.origY = target.y;\r\n      try {\r\n        (target as any).cursor = \"grabbing\";\r\n      } catch {}\r\n      if (event.stopPropagation) event.stopPropagation();\r\n    } catch {}\r\n  };\r\n  target.on(\"pointerdown\", onDown);\r\n  target.on(\"touchstart\", onDown);\r\n}\r\n// export async function tryLoadModel(url) {\r\n//   try {\r\n//     const resp = await fetch(url, { method: \"GET\" });\r\n//     if (!resp.ok)\r\n//       throw new Error(\r\n//         \"HTTP \" + resp.status + \" \" + resp.statusText + \" for \" + url\r\n//       );\r\n//     let discoveredMotionGroups = [];\r\n//     try {\r\n//       discoveredMotionGroups = await preloadMotionsFromModelJson(url);\r\n//     } catch (e) {\r\n//       console.warn(e);\r\n//     }\r\n//     await setModel(PIXI.live2d.Live2DModel.from(url));\r\n//     try {\r\n//       (getModel() as any).__motionGroups = discoveredMotionGroups;\r\n//     } catch (e) {}\r\n//     return getModel();\r\n//   } catch (err) {\r\n//     throw new Error(\r\n//       \"Failed to load model from \" +\r\n//         url +\r\n//         \" \u2014 \" +\r\n//         (err && err.message ? err.message : err)\r\n//     );\r\n//   }\r\n// }\r\n\r\nexport {};\r\n", "// \u0413\u043B\u043E\u0431\u0430\u043B\u044C\u043D\u044B\u0435 \u043E\u0431\u044A\u044F\u0432\u043B\u0435\u043D\u0438\u044F \u0434\u043B\u044F TS (\u043C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u043E, \u0431\u0435\u0437 global augmentation)\n// @ts-nocheck\ndeclare const PIXI: any;\nimport { config } from \"../config\";\nimport {\n  loadModel,\n  detectRuntimeByUrl,\n  enableDraggingForModel,\n  loadSelectedModel,\n  scheduleGroupRefresh,\n  ensureIndexLoaded,\n  tryFindAlternateModelJsonUrl,\n  resolveModelUrl,\n  buildSyntheticCubism2Json,\n} from \"./live2d/live2dLoader\";\nimport { resizeStageToContainer } from \"./live2d/live2dutils\";\nimport {\n  makeAbsolute,\n  toAbsoluteAssetUrl,\n  encodeRepoPath,\n  buildRepoPath,\n  sayRandom,\n  ping,\n  log,\n} from \"../../utils/utils\";\nimport { getModel, setModel } from \"./modelStore\";\n\nimport {\n  getmotionEntries,\n  setmotionEntries,\n  getavailableGroups,\n  setavailableGroups,\n} from \"./modelIterations/motionState\";\nimport { getLipSyncState, setLipSyncState } from \"./lipsync/lipsyncState\";\n// \u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0447\u0435\u0440\u0435\u0437 CDN, \u043C\u043E\u0436\u043D\u043E \u0437\u0430\u043C\u0435\u043D\u0438\u0442\u044C \u043D\u0430 \u043B\u043E\u043A\u0430\u043B\u044C\u043D\u044B\u0435 \u0430\u0441\u0441\u0435\u0442\u044B\nexport const app = new PIXI.Application({\n  transparent: true,\n  width: 320,\n  height: 480,\n});\n// Only run the main index page logic when we're actually on the index.html\n// This prevents the bundle from executing DOM queries on pages like viewer.html\n// where the expected elements (e.g. #model, #controls) don't exist.\nif (document.getElementById(\"model\") && document.getElementById(\"controls\")) {\n  (async function () {\n    window.overlayAPI.setZoomFactor(1);\n    const MODELS = config.MODELS;\n    const LAST_MODEL_KEY = config.LAST_MODEL_KEY;\n    const ping = async (url: string) => {\n      try {\n        const r = await fetch(url, { method: \"HEAD\" });\n        return r.ok;\n      } catch {\n        return false;\n      }\n    };\n    let ghAvalible = false;\n    await ping(\"https://raw.githubusercontent.com\").then((e) => {\n      ghAvalible = e;\n    });\n\n    try {\n      document.getElementById(\"model\").appendChild(app.view);\n      try {\n        (app.stage as any).interactive = true;\n      } catch {}\n      const modelContainerEl = document.getElementById(\"model\");\n\n      window.addEventListener(\"resize\", resizeStageToContainer);\n      try {\n        const ro = new ResizeObserver(() => resizeStageToContainer());\n        ro.observe(modelContainerEl);\n      } catch {}\n      // initial fit\n      resizeStageToContainer();\n\n      // function buildCubism2DataJson(json, baseUrl) {\n      //   const clone = { ...json };\n      //   try {\n      //     if (clone.model) clone.model = makeAbsolute(baseUrl, clone.model);\n      //     if (Array.isArray(clone.textures))\n      //       clone.textures = clone.textures.map((t) => makeAbsolute(baseUrl, t));\n      //     if (clone.physics) clone.physics = makeAbsolute(baseUrl, clone.physics);\n      //     if (clone.pose) clone.pose = makeAbsolute(baseUrl, clone.pose);\n      //     if (Array.isArray(clone.expressions)) {\n      //       clone.expressions = clone.expressions.map((e) => {\n      //         if (typeof e === \"string\") return makeAbsolute(baseUrl, e);\n      //         const ee = { ...e };\n      //         if (ee.file) ee.file = makeAbsolute(baseUrl, ee.file);\n      //         if (ee.File) ee.File = makeAbsolute(baseUrl, ee.File);\n      //         return ee;\n      //       });\n      //     }\n      //     if (clone.motions || clone.Motions) {\n      //       const motions = clone.motions || clone.Motions;\n      //       const out = {};\n      //       for (const g of Object.keys(motions || {})) {\n      //         out[g] = (motions[g] || []).map((m) => {\n      //           if (typeof m === \"string\") return makeAbsolute(baseUrl, m);\n      //           const mm = { ...m };\n      //           if (mm.file) mm.file = makeAbsolute(baseUrl, mm.file);\n      //           if (mm.File) mm.File = makeAbsolute(baseUrl, mm.File);\n      //           return mm;\n      //         });\n      //       }\n      //       if (clone.motions) clone.motions = out;\n      //       if (clone.Motions) clone.Motions = out;\n      //     }\n      //   } catch {}\n      //   const data =\n      //     \"data:application/json;charset=utf-8,\" +\n      //     encodeURIComponent(JSON.stringify(clone));\n      //   return data;\n      // }\n\n      // --- Viewer-like helpers for robust model loading ---\n\n      // select \u043C\u043E\u0434\u0435\u043B\u0438\n      const controls = document.getElementById(\"controls\");\n      const select = document.createElement(\"select\");\n      select.style.webkitAppRegion = \"no-drag\";\n      MODELS.forEach((url, i) => {\n        const opt = document.createElement(\"option\");\n        opt.value = url;\n        opt.textContent = `Model ${i + 1}`;\n        select.appendChild(opt);\n      });\n      controls.insertBefore(select, controls.firstChild);\n\n      // Add inspector open button\n      const openInspectorBtn = document.createElement(\"button\");\n      openInspectorBtn.textContent = \"Change model\uD83D\uDC96\";\n      openInspectorBtn.style.webkitAppRegion = \"no-drag\";\n      openInspectorBtn.className = \"btn\";\n      openInspectorBtn.addEventListener(\"click\", () => {\n        let current = \"\";\n        try {\n          current = localStorage.getItem(LAST_MODEL_KEY) || \"\";\n        } catch {}\n        if (!current) current = select.value || \"\";\n        try {\n          localStorage.setItem(LAST_MODEL_KEY, current);\n        } catch {}\n        try {\n          window.overlayAPI?.saveLastModel?.(current);\n        } catch {}\n        window.location.href = `viewer.html`;\n      });\n      controls.insertBefore(openInspectorBtn, select);\n      // Add inspector open button\n      const spineviewerbtn = document.createElement(\"button\");\n      spineviewerbtn.textContent = \"spine viewer\";\n      spineviewerbtn.style.webkitAppRegion = \"no-drag\";\n      spineviewerbtn.className = \"btn\";\n      spineviewerbtn.addEventListener(\"click\", () => {\n        // \u0423\u0441\u0442\u0430\u043D\u0430\u0432\u043B\u0438\u0432\u0430\u0435\u043C \u043C\u0430\u0441\u0448\u0442\u0430\u0431 100% \u0438 \u043F\u0435\u0440\u0435\u0445\u043E\u0434\u0438\u043C \u043F\u043E \u0441\u0441\u044B\u043B\u043A\u0435\n        window.location.href = `spine.html`;\n      });\n      controls.insertBefore(spineviewerbtn, openInspectorBtn);\n\n      // \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u043A\u043D\u043E\u043F\u043E\u043A \u0441 \u043D\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u043C\u044B\u043C \u043C\u0430\u0441\u0448\u0442\u0430\u0431\u043E\u043C\n\n      // \u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u0443\u0441\u0442\u0430\u043D\u0430\u0432\u043B\u0438\u0432\u0430\u0435\u043C \u043C\u0430\u0441\u0448\u0442\u0430\u0431 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B\n\n      // Animations UI: list available groups and allow playing one (styled)\n      const animSelect = document.createElement(\"select\");\n      animSelect.className = \"select\";\n      animSelect.style.webkitAppRegion = \"no-drag\";\n      animSelect.id = \"animSelect\";\n      animSelect.disabled = true;\n      const animPlayBtn = document.createElement(\"button\");\n      animPlayBtn.className = \"btn\";\n      animPlayBtn.textContent = \"\u25B6\";\n      animPlayBtn.title = \"\u041F\u0440\u043E\u0438\u0433\u0440\u0430\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u0443\u044E \u0433\u0440\u0443\u043F\u043F\u0443\";\n      animPlayBtn.style.webkitAppRegion = \"no-drag\";\n      animPlayBtn.disabled = true;\n      // controls.insertBefore(animPlayBtn, openInspectorBtn);\n      // controls.insertBefore(animSelect, openInspectorBtn);\n\n      // Voice TTS toggle\n      const voiceBtn = document.createElement(\"button\");\n      voiceBtn.className = \"btn\";\n      voiceBtn.textContent = \"Voice: Audio\";\n      voiceBtn.title = \"\u041E\u0437\u0432\u0443\u0447\u043A\u0430 \u0444\u0440\u0430\u0437 (TTS)\";\n      voiceBtn.style.webkitAppRegion = \"no-drag\";\n      controls.insertBefore(voiceBtn, openInspectorBtn);\n\n      // removed secondary viewer button\n\n      function setMouthOpenParam(value) {\n        const targetModel = getModel();\n        if (!targetModel) return false;\n        const v = Math.max(0, Math.min(1, value));\n        // Try Cubism4 core\n        try {\n          const core =\n            targetModel.internalModel && targetModel.internalModel.coreModel;\n          if (core) {\n            if (typeof core.setParameterById === \"function\") {\n              core.setParameterById(\"ParamMouthOpenY\", v);\n              return true;\n            }\n            if (typeof core.setParameterValueById === \"function\") {\n              core.setParameterValueById(\"ParamMouthOpenY\", v);\n              return true;\n            }\n            if (\n              typeof core.getParameterIndexById === \"function\" &&\n              typeof core.setParameterValueByIndex === \"function\"\n            ) {\n              const idx = core.getParameterIndexById(\"ParamMouthOpenY\");\n              if (idx >= 0) {\n                core.setParameterValueByIndex(idx, v);\n                return true;\n              }\n            }\n          }\n        } catch (e) {}\n        // Try Cubism2 API\n        try {\n          const c2 =\n            (targetModel.internalModel &&\n              targetModel.internalModel.coreModel) ||\n            targetModel;\n          if (c2 && typeof c2.setParamFloat === \"function\") {\n            c2.setParamFloat(\"PARAM_MOUTH_OPEN_Y\", v);\n            return true;\n          }\n        } catch (e) {}\n        // Some wrappers might expose direct method\n        try {\n          if (typeof targetModel.setParamFloat === \"function\") {\n            targetModel.setParamFloat(\"PARAM_MOUTH_OPEN_Y\", v);\n            return true;\n          }\n        } catch (e) {}\n        return false;\n      }\n      loadPhrasesJson();\n      // --- TTS (Voice) ---\n      let voiceEnabled = true;\n      let voiceMode = \"audio\";\n\n      // --- Audio files for phrases ---\n      const VOICE_AUDIO_DEFAULT = {\n        start: [],\n        finish: [],\n        break: [],\n        xp: [],\n        fun: [],\n      };\n      let VOICE_AUDIO = { ...VOICE_AUDIO_DEFAULT };\n      const audioCache = new Map();\n      function getAudio(url) {\n        let a = audioCache.get(url);\n        if (!a) {\n          a = new Audio(url);\n          a.preload = \"auto\";\n          audioCache.set(url, a);\n        }\n        return a;\n      }\n      let currentAudio = null;\n      function playAudioCategory(cat) {\n        return new Promise((resolve) => {\n          try {\n            const list = (VOICE_AUDIO && VOICE_AUDIO[cat]) || [];\n            if (!Array.isArray(list) || !list.length) return resolve(false);\n            const pick = list[Math.floor(Math.random() * list.length)];\n            if (!pick) return resolve(false);\n            if (currentAudio) {\n              try {\n                currentAudio.pause();\n                currentAudio.currentTime = 0;\n              } catch (e) {}\n            }\n            const a = getAudio(pick);\n            currentAudio = a;\n            a.currentTime = 0;\n            const p = a.play();\n            if (p && typeof p.then === \"function\") {\n              p.then(() => resolve(true)).catch(() => resolve(false));\n            } else {\n              resolve(true);\n            }\n          } catch (e) {\n            resolve(false);\n          }\n        });\n      }\n\n      // LipSync driven by phrase playback (audio element) or speech synthesis\n      function getForcePriority() {\n        try {\n          const ns = PIXI.live2d && PIXI.live2d.MotionPriority;\n          return (ns && (ns.FORCE || ns.PriorityForce)) || 3;\n        } catch (e) {\n          return 3;\n        }\n      }\n      function ensureAudioContext() {\n        try {\n          const AudioCtx =\n            window.AudioContext || (window as any).webkitAudioContext || null;\n          if (!AudioCtx) return null;\n          // Lazy init: try create now\n          const lipSyncState = getLipSyncState();\n          if (!lipSyncState.audioContext) {\n            try {\n              lipSyncState.audioContext = new AudioCtx();\n            } catch {\n              lipSyncState.audioContext = null;\n            }\n            setLipSyncState(lipSyncState);\n          }\n\n          const ctx = getLipSyncState().audioContext;\n          if (!ctx) {\n            // Retry on first user gesture\n            const retry = () => {\n              try {\n                const lipSyncState = getLipSyncState();\n                lipSyncState.audioContext = new AudioCtx();\n                setLipSyncState(lipSyncState);\n              } catch {}\n              window.removeEventListener(\"pointerdown\", retry);\n              window.removeEventListener(\"touchstart\", retry);\n            };\n            window.addEventListener(\"pointerdown\", retry, { once: true });\n            window.addEventListener(\"touchstart\", retry, { once: true });\n            return null;\n          }\n          // If suspended, try resume\n          try {\n            if ((ctx as any).state === \"suspended\") {\n              (ctx as any).resume();\n            }\n          } catch {}\n          return getLipSyncState().audioContext;\n        } catch {\n          return null;\n        }\n      }\n\n      function startLipSyncForAudio(audioEl) {\n        const model = getModel();\n        if (!audioEl || !model) return;\n        const ctx = ensureAudioContext();\n        if (!ctx) return;\n        try {\n          if (getLipSyncState().source && getLipSyncState().source.disconnect)\n            getLipSyncState().source.disconnect();\n        } catch (e) {}\n        try {\n          const source = ctx.createMediaElementSource(audioEl);\n          const analyser = ctx.createAnalyser();\n          analyser.fftSize = 2048;\n          const data = new Uint8Array(analyser.fftSize);\n          source.connect(analyser);\n          analyser.connect(ctx.destination);\n          const lipSyncState = getLipSyncState();\n          lipSyncState.source = source;\n          lipSyncState.analyser = analyser;\n          lipSyncState.data = data;\n          setLipSyncState(lipSyncState);\n          const update = () => {\n            if (!getLipSyncState().lipSyncEnabled) return;\n            try {\n              analyser.getByteTimeDomainData(data);\n              let min = 255,\n                max = 0;\n              for (let i = 0; i < data.length; i++) {\n                const v = data[i];\n                if (v < min) min = v;\n                if (v > max) max = v;\n              }\n              let amp = (max - min) / 255;\n              amp = Math.pow(Math.max(0, amp - 0.02) * 1.8, 1.2);\n              if (amp > 1) amp = 1;\n              setMouthOpenParam(amp);\n            } catch (e) {}\n            if (audioEl.ended || audioEl.paused) {\n              setMouthOpenParam(0);\n              return;\n            }\n            const lipSyncState = getLipSyncState();\n            lipSyncState.raf = requestAnimationFrame(update);\n            setLipSyncState(lipSyncState);\n          };\n          const lipSyncStateUpdated = getLipSyncState();\n          lipSyncStateUpdated.lipSyncEnabled = true;\n          lipSyncStateUpdated.raf = requestAnimationFrame(update);\n          setLipSyncState(lipSyncStateUpdated);\n        } catch (e) {}\n      }\n\n      async function loadPhrasesJson() {\n        try {\n          const resp = await fetch(\"./phrases.json\", { cache: \"no-cache\" });\n          if (!resp.ok) return;\n          const data = await resp.json();\n          // Accept either {cat: [audioUrls]} or {cat: {audio: [...], text: [...]}}\n          const mergedAudio = { ...VOICE_AUDIO_DEFAULT };\n          for (const k of Object.keys(mergedAudio)) {\n            const v = (data as any)[k];\n            if (Array.isArray(v)) {\n              mergedAudio[k] = v;\n            } else if (v && Array.isArray((v as any).audio)) {\n              mergedAudio[k] = (v as any).audio;\n            } else {\n              mergedAudio[k] = [];\n            }\n          }\n          VOICE_AUDIO = mergedAudio;\n        } catch (e) {}\n      }\n\n      // \u0412\u043D\u0435\u0448\u043D\u0438\u0435 \u0445\u0435\u043B\u043F\u0435\u0440\u044B \u0430\u043D\u0438\u043C\u0430\u0446\u0438\u0439 \u0434\u043B\u044F \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F \u0438\u0437 \u043B\u044E\u0431\u043E\u0433\u043E \u043C\u0435\u0441\u0442\u0430\n      function playRandomNonIdle() {\n        const model = getModel();\n        if (!model || !getmotionEntries().length) return;\n        const candidates = motionEntries.filter((m) => {\n          const g = String(m.group || \"\").toLowerCase();\n          const f = String(m.file || \"\").toLowerCase();\n          return g !== \"idle\" && !f.includes(\"idle\");\n        });\n        const list = candidates.length ? candidates : motionEntries;\n        const pick = list[Math.floor(Math.random() * list.length)];\n        try {\n          const mm = model.internalModel && model.internalModel.motionManager;\n          const pr = getForcePriority();\n          if (mm && typeof mm.startMotion === \"function\")\n            mm.startMotion(pick.group, pick.index, pr);\n          else if (mm && typeof mm.startRandomMotion === \"function\")\n            mm.startRandomMotion(pick.group, pr);\n        } catch (e) {}\n      }\n\n      function interruptAndPlayRandomNonIdle() {\n        const m = getModel();\n        if (!m) return;\n        try {\n          const mm = m.internalModel && m.internalModel.motionManager;\n          if (mm) {\n            if (typeof mm.stopAllMotions === \"function\") mm.stopAllMotions();\n            else if (\n              mm._motionQueueManager &&\n              typeof mm._motionQueueManager.stopAllMotions === \"function\"\n            )\n              mm._motionQueueManager.stopAllMotions();\n          }\n        } catch (e) {}\n        playRandomNonIdle();\n        try {\n          snoozeIdle(6000);\n        } catch (e) {}\n      }\n\n      function speakCategory(cat) {\n        if (!voiceEnabled || !cat) return;\n        playAudioCategory(cat).then((ok) => {\n          if (ok && currentAudio) {\n            if (getLipSyncState().lipSyncEnabled)\n              startLipSyncForAudio(currentAudio);\n\n            // trigger animation immediately on voice start\n            interruptAndPlayRandomNonIdle();\n            try {\n              currentAudio.addEventListener(\n                \"play\",\n                () => interruptAndPlayRandomNonIdle(),\n                { once: true }\n              );\n              currentAudio.addEventListener(\n                \"playing\",\n                () => interruptAndPlayRandomNonIdle(),\n                { once: true }\n              );\n            } catch (e) {}\n            if (!currentAudio.paused) {\n              setTimeout(() => interruptAndPlayRandomNonIdle(), 0);\n            }\n          } else if (!ok) {\n            // \u041D\u0435\u0442 \u0430\u0443\u0434\u0438\u043E \u2014 \u043F\u0440\u043E\u0441\u0442\u043E \u0437\u0430\u043F\u0443\u0441\u0442\u0438\u043C \u0440\u0435\u0430\u043A\u0446\u0438\u044E \u0430\u043D\u0438\u043C\u0430\u0446\u0438\u0435\u0439\n            interruptAndPlayRandomNonIdle();\n          }\n        });\n        return;\n      }\n\n      voiceBtn.addEventListener(\"click\", () => {\n        if (voiceMode === \"audio\") {\n          voiceMode = \"off\";\n          voiceBtn.textContent = \"Voice: Off\";\n        } else {\n          voiceMode = \"audio\";\n          voiceBtn.textContent = \"Voice: Audio\";\n        }\n        voiceEnabled = voiceMode !== \"off\";\n      });\n\n      async function startLipSync() {\n        const model = getModel();\n        if (!window.navigator || !navigator.mediaDevices) return;\n        if (!model) return;\n        try {\n          const stream = await navigator.mediaDevices.getUserMedia({\n            audio: true,\n            video: false,\n          });\n          const AudioCtx =\n            window.AudioContext || (window as any).webkitAudioContext || null;\n          if (!AudioCtx) return;\n          const audioContext = new AudioCtx();\n          const source = audioContext.createMediaStreamSource(stream);\n          const analyser = audioContext.createAnalyser();\n          analyser.fftSize = 2048;\n          const data = new Uint8Array(analyser.fftSize);\n          source.connect(analyser);\n          setLipSyncState({\n            stream,\n            audioContext,\n            source,\n            analyser,\n            data,\n            raf: null,\n          });\n\n          const update = () => {\n            if (!lipSyncEnabled) return;\n            try {\n              analyser.getByteTimeDomainData(data);\n              // Compute peak-to-peak amplitude normalized\n              let min = 255,\n                max = 0;\n              for (let i = 0; i < data.length; i++) {\n                const v = data[i];\n                if (v < min) min = v;\n                if (v > max) max = v;\n              }\n              let amp = (max - min) / 255; // 0..~1\n              // Smooth and scale\n              amp = Math.pow(Math.max(0, amp - 0.02) * 1.8, 1.2);\n              if (amp > 1) amp = 1;\n              setMouthOpenParam(getModel(), amp);\n            } catch (e) {}\n            const lipSyncState = getLipSyncState();\n            lipSyncState.raf = requestAnimationFrame(update);\n            setLipSyncState(lipSyncState);\n          };\n          lipSyncEnabled = true;\n\n          update();\n        } catch (e) {}\n      }\n\n      function stopLipSync() {\n        try {\n          if (getLipSyncState() && getLipSyncState().raf != null) {\n            cancelAnimationFrame(getLipSyncState().raf as any);\n            const lipSyncState = getLipSyncState();\n            lipSyncState.raf = null;\n            setLipSyncState(lipSyncState);\n          }\n        } catch (e) {}\n        try {\n          if (\n            getLipSyncState() &&\n            getLipSyncState().source &&\n            getLipSyncState().source.disconnect\n          ) {\n            getLipSyncState().source.disconnect();\n          }\n        } catch (e) {}\n        try {\n          if (getLipSyncState() && getLipSyncState().stream) {\n            getLipSyncState()\n              .stream.getTracks()\n              .forEach((t) => t.stop());\n          }\n        } catch (e) {}\n        try {\n          setMouthOpenParam(0);\n        } catch (e) {}\n      }\n\n      // LipSync \u0432\u0441\u0435\u0433\u0434\u0430 \u0432\u043A\u043B\u044E\u0447\u0435\u043D \u0431\u0435\u0437 UI-\u043A\u043D\u043E\u043F\u043A\u0438\n\n      function refreshAnimationsUI() {\n        const placeholder = document.createElement(\"option\");\n        placeholder.value = \"\";\n        placeholder.textContent = \"\u0410\u043D\u0438\u043C\u0430\u0446\u0438\u0438\";\n        animSelect.innerHTML = \"\";\n        animSelect.appendChild(placeholder);\n\n        const entries = Array.isArray(motionEntries)\n          ? motionEntries.slice()\n          : [];\n\n        const niceName = (filePath) => {\n          try {\n            const file = decodeURIComponent(String(filePath || \"\"))\n              .split(\"/\")\n              .pop();\n            if (!file) return \"motion\";\n            return file\n              .replace(/\\.(motion3|mtn|json)$/i, \"\")\n              .replace(/[_.]+/g, \" \")\n              .trim();\n          } catch {\n            return \"motion\";\n          }\n        };\n\n        if (entries.length) {\n          entries.forEach((e) => {\n            const opt = document.createElement(\"option\");\n            opt.value = `${e.group}::${e.index}`;\n            opt.dataset.group = String(e.group || \"\");\n            opt.dataset.index = String(e.index);\n            const labelCore = niceName(e.file);\n            const groupLabel = String(e.group || \"\").trim();\n            opt.textContent = groupLabel\n              ? `${groupLabel}: ${labelCore}`\n              : labelCore;\n            animSelect.appendChild(opt);\n          });\n          animSelect.disabled = false;\n          animPlayBtn.disabled = false;\n          return;\n        }\n\n        // Fallback to group-based listing if we have no parsed entries\n        const groups = Array.from(\n          new Set([...(getavailableGroups() || [])])\n        ).filter((g) => String(g).length > 0);\n        // Try to synthesize per-index entries from runtime definitions\n        let synthesized = false;\n        try {\n          const mm =\n            model && model.internalModel && model.internalModel.motionManager;\n          const defs =\n            mm && (mm.definitions || mm._definitions || mm._motions || null);\n          if (defs) {\n            for (const g of groups) {\n              let length = 0;\n              if (Array.isArray(defs[g])) length = defs[g].length || 0;\n              else if (defs[g] && typeof defs[g].length === \"number\")\n                length = defs[g].length;\n              else if (typeof defs.get === \"function\") {\n                const arr = defs.get(g);\n                length = (arr && arr.length) || 0;\n              }\n              if (length > 0) {\n                for (let i = 0; i < length; i++) {\n                  const opt = document.createElement(\"option\");\n                  opt.value = `${g}::${i}`;\n                  opt.dataset.group = String(g);\n                  opt.dataset.index = String(i);\n                  opt.textContent = `${g}: motion ${i + 1}`;\n                  animSelect.appendChild(opt);\n                }\n                synthesized = true;\n              }\n            }\n          }\n        } catch (e) {}\n        if (!synthesized) {\n          for (const g of groups) {\n            const opt = document.createElement(\"option\");\n            opt.value = g;\n            opt.textContent = g;\n            animSelect.appendChild(opt);\n          }\n        }\n        const enabled = groups.length > 0;\n        animSelect.disabled = !enabled;\n        animPlayBtn.disabled = !enabled;\n      }\n\n      function playSelectedAnimationGroup() {\n        const model = getModel();\n        if (!model) return;\n        if (!animSelect.value) return;\n        const mm = model.internalModel && model.internalModel.motionManager;\n\n        // If a specific motion (group+index) was selected, prefer that\n        const selectedOpt = animSelect.options[animSelect.selectedIndex];\n        const hasIndexSel =\n          selectedOpt &&\n          selectedOpt.dataset &&\n          selectedOpt.dataset.index != null;\n        let played = false;\n        if (hasIndexSel) {\n          const grp = selectedOpt.dataset.group || \"\";\n          const idx = parseInt(selectedOpt.dataset.index, 10);\n          try {\n            if (mm && typeof mm.startMotion === \"function\") {\n              mm.startMotion(grp, isFinite(idx) ? idx : 0, getForcePriority());\n              played = true;\n            }\n          } catch (e) {}\n          if (!played) {\n            try {\n              if (typeof model.motion === \"function\") {\n                model.motion(grp, isFinite(idx) ? idx : 0);\n                played = true;\n              }\n            } catch (e) {}\n          }\n          if (played) {\n            snoozeIdle(9000);\n            return;\n          }\n        }\n\n        // Otherwise treat value as a group and pick an index\n        const group = animSelect.value;\n        const pickIndex = () => {\n          // Prefer indices from parsed motionEntries\n          const candidates = (getmotionEntries() || [])\n            .filter((e) => (e.group || \"\") === group)\n            .map((e) => e.index)\n            .filter((i) => typeof i === \"number\" && i >= 0);\n          if (candidates.length) {\n            return candidates[Math.floor(Math.random() * candidates.length)];\n          }\n          // Try to inspect runtime definitions\n          try {\n            const defs =\n              (mm && (mm.definitions || mm._definitions || mm._motions)) ||\n              null;\n            if (defs) {\n              if (Array.isArray(defs[group])) return 0;\n              if (defs[group] && typeof defs[group].length === \"number\")\n                return 0;\n              if (typeof defs.get === \"function\") {\n                const arr = defs.get(group);\n                if (arr && arr.length) return 0;\n              }\n            }\n          } catch {}\n          return 0;\n        };\n\n        // Try available APIs in order\n        try {\n          if (mm && typeof mm.startMotion === \"function\") {\n            const idx = pickIndex();\n            mm.startMotion(group, idx, getForcePriority());\n            snoozeIdle(9000);\n            return;\n          }\n        } catch (e) {}\n        try {\n          if (mm && typeof mm.startRandomMotion === \"function\") {\n            mm.startRandomMotion(group, getForcePriority());\n            snoozeIdle(9000);\n            return;\n          }\n        } catch (e) {}\n        try {\n          if (typeof model.motion === \"function\") {\n            const idx = pickIndex();\n            try {\n              model.motion(group, idx);\n            } catch {\n              model.motion(group);\n            }\n            snoozeIdle(getModel(), 9000);\n            return;\n          }\n        } catch (e) {}\n      }\n\n      // animPlayBtn.addEventListener(\"click\", playSelectedAnimationGroup);\n      // animSelect.addEventListener(\"change\", () => {\n      //   // optional: auto-play on selection\n      //   playSelectedAnimationGroup();\n      // });\n\n      function getMotionEntriesFromJson(json, baseUrl) {\n        const entries = [];\n        const add = (group, arr) => {\n          (arr || []).forEach((m, idx) => {\n            if (typeof m === \"string\") {\n              entries.push({ group, index: idx, file: baseUrl + m });\n            } else if (m && (m.file || m.File)) {\n              const f = m.file || m.File;\n              entries.push({ group, index: idx, file: baseUrl + f });\n            }\n          });\n        };\n        try {\n          const m2 = json.motions || json.Motions || {};\n          for (const g of Object.keys(m2)) add(g, m2[g]);\n        } catch {}\n        try {\n          const m4 = (json.FileReferences && json.FileReferences.Motions) || {};\n          for (const g of Object.keys(m4)) add(g, m4[g]);\n        } catch {}\n        return entries;\n      }\n\n      function startIdleLoop(preferredGroups) {\n        const model = getModel();\n        if (!model) return;\n        try {\n          if (model.__idleTimer) {\n            clearInterval(model.__idleTimer);\n            model.__idleTimer = null;\n          }\n        } catch {}\n        const mm = model.internalModel && model.internalModel.motionManager;\n        if (!(mm && typeof mm.startRandomMotion === \"function\")) return;\n        // collect groups from settings if not provided\n        let groups = Array.isArray(preferredGroups)\n          ? preferredGroups.slice()\n          : [];\n        try {\n          const s = model.internalModel && model.internalModel.settings;\n          const motions = (s && s.motions) || {};\n          groups = Array.from(new Set([...groups, ...Object.keys(motions)]));\n        } catch {}\n        const defaults = [\n          \"Idle\",\n          \"idle\",\n          \"TapBody\",\n          \"TapHead\",\n          \"tap_body\",\n          \"tap_head\",\n        ];\n        const candidates = Array.from(new Set([...defaults, ...groups])).filter(\n          Boolean\n        );\n        const hasGroup = (g) => {\n          try {\n            const defs = mm.definitions || mm._definitions || mm._motions || {};\n            return !!defs[g];\n          } catch {\n            return true; // best-effort\n          }\n        };\n        let chosen = null;\n        for (const g of candidates) {\n          if (!hasGroup(g)) continue;\n          try {\n            mm.startRandomMotion(g);\n            chosen = g;\n            break;\n          } catch {}\n        }\n        if (!chosen) return;\n        model.__idleTimer = setInterval(() => {\n          try {\n            // stop if model replaced\n            if (!getModel() || getModel() !== model) {\n              clearInterval(model.__idleTimer);\n              model.__idleTimer = null;\n              return;\n            }\n            const cur = getModel();\n            const curMM =\n              cur && cur.internalModel && cur.internalModel.motionManager;\n            if (curMM && typeof curMM.startRandomMotion === \"function\") {\n              curMM.startRandomMotion(chosen);\n            }\n          } catch {}\n        }, 12000);\n      }\n\n      // Cubism 4 often stores motions differently. Prefer explicit Idle motion3 file if present.\n      function startIdleLoopC4() {\n        const model = getModel();\n        if (!model) return;\n        try {\n          if (model.__idleTimer) {\n            clearInterval(model.__idleTimer);\n            model.__idleTimer = null;\n          }\n        } catch {}\n        const mm = model.internalModel && model.internalModel.motionManager;\n        if (!mm) return;\n\n        const entries = Array.isArray(getmotionEntries())\n          ? getmotionEntries()\n          : [];\n        const idleEntries = entries.filter((e) => {\n          try {\n            const name = String(e.file || \"\").toLowerCase();\n            return name.includes(\"idle\");\n          } catch {\n            return false;\n          }\n        });\n\n        let chosen = null;\n        if (idleEntries.length) {\n          chosen = idleEntries[Math.floor(Math.random() * idleEntries.length)];\n        } else {\n          // Fallback: look for a group literally named Idle\n          try {\n            const defs = mm.definitions || mm._definitions || mm._motions || {};\n            const groups = Object.keys(defs || {});\n            const idleGroup = groups.find(\n              (g) => String(g).toLowerCase() === \"idle\"\n            );\n            if (idleGroup) chosen = { group: idleGroup, index: 0 };\n          } catch {}\n        }\n\n        if (!chosen) return;\n        // Start once and then repeat periodically\n        try {\n          if (typeof mm.startMotion === \"function\") {\n            mm.startMotion(chosen.group || \"Idle\", chosen.index || 0);\n          } else if (typeof mm.startRandomMotion === \"function\") {\n            mm.startRandomMotion(chosen.group || \"Idle\");\n          }\n        } catch {}\n        model.__idleTimer = setInterval(() => {\n          try {\n            if (!getModel() || getModel() !== model) {\n              clearInterval(model.__idleTimer);\n              model.__idleTimer = null;\n              return;\n            }\n            const cur = getModel();\n            const curMM =\n              cur && cur.internalModel && cur.internalModel.motionManager;\n            if (!curMM) return;\n            if (typeof curMM.startMotion === \"function\") {\n              curMM.startMotion(chosen.group || \"Idle\", chosen.index || 0);\n            } else if (typeof curMM.startRandomMotion === \"function\") {\n              curMM.startRandomMotion(chosen.group || \"Idle\");\n            }\n          } catch {}\n        }, 12000);\n      }\n\n      // Temporarily pause idle loop and resume later\n      function snoozeIdle(ms) {\n        const modelRef = getModel();\n        try {\n          if (!modelRef) return;\n          if (modelRef.__idleTimer) {\n            clearInterval(modelRef.__idleTimer);\n            modelRef.__idleTimer = null;\n          }\n          if (modelRef.__idleSnooze) {\n            clearTimeout(modelRef.__idleSnooze);\n            modelRef.__idleSnooze = null;\n          }\n          modelRef.__idleSnooze = setTimeout(() => {\n            try {\n              if (!getModel() || getModel() !== modelRef) return;\n              if (currentRuntime === \"c4\") startIdleLoopC4();\n              else\n                startIdleLoop(\n                  Array.from(\n                    new Set(\n                      (getmotionEntries() || []).map((e) =>\n                        String(e.group || \"\").trim()\n                      )\n                    )\n                  ).filter(Boolean)\n                );\n            } catch (e) {}\n          }, Math.max(2000, ms || 8000));\n        } catch (e) {}\n      }\n\n      // Dependencies loaders (idempotent)\n      let cubism2Ready = false;\n      let cubism4Ready = false;\n      let currentRuntime = null; // 'c2' | 'c4'\n      (window as any).__loadedRuntime = (window as any).__loadedRuntime || null;\n\n      // ---- Live2D loader/factory patches (based on live2d-viewer-web) ----\n      function applyPixiLive2dPatches() {\n        const ns = (PIXI as any).live2d;\n        if (!ns) return;\n        if ((window as any).__live2d_loader_patched) return;\n        (window as any).__live2d_loader_patched = true;\n\n        const {\n          Live2DLoader,\n          XHRLoader,\n          Live2DFactory,\n          InternalModel,\n          Cubism2ModelSettings,\n          Cubism4ModelSettings,\n        } = ns || {};\n        if (!Live2DLoader || !XHRLoader || !Live2DFactory) return;\n\n        const urlUtils = {\n          resolve: (baseUrl: string, relative: string) => {\n            try {\n              return new URL(relative, baseUrl).toString();\n            } catch {\n              return relative;\n            }\n          },\n        };\n\n        const snakeCaseUpper = (s: string) => {\n          if (!s) return s;\n          // ParamAngleX -> PARAM_ANGLE_X\n          return String(s)\n            .replace(/([a-z0-9])([A-Z])/g, \"$1_$2\")\n            .replace(/[-\\s]+/g, \"_\")\n            .toUpperCase();\n        };\n\n        const unionBy = <T extends Record<string, any>>(\n          arr: T[] | undefined,\n          extras: T[],\n          key: string\n        ): T[] => {\n          const out: T[] = Array.isArray(arr) ? arr.slice() : [];\n          const seen = new Set(out.map((x) => String(x && x[key])));\n          for (const e of extras) {\n            const k = String(e && e[key]);\n            if (!seen.has(k)) {\n              seen.add(k);\n              out.push(e);\n            }\n          }\n          return out;\n        };\n\n        // Replace XHR loader to handle jsDelivr 403 fallback\n        try {\n          const idx = Live2DLoader.middlewares.indexOf(XHRLoader.loader);\n          if (idx >= 0) {\n            Live2DLoader.middlewares[idx] = async (context: any, next: any) => {\n              const url = context.settings\n                ? context.settings.resolveURL(context.url)\n                : context.url;\n              try {\n                await XHRLoader.loader(context, next);\n                return;\n              } catch (e: any) {\n                if (!(e && e.status === 403 && /jsdelivr/i.test(url))) {\n                  throw e;\n                }\n                try {\n                  console.warn(\n                    \"[live2d] 403 from jsDelivr, switching alternative URL\"\n                  );\n                } catch {}\n              }\n              context.url = getAlternativeURL(url);\n              await XHRLoader.loader(context, next);\n              return next();\n            };\n          }\n        } catch {}\n\n        // Patches table (subset)\n        const patches: Array<{\n          search: string;\n          replace?: (jsonText: string, url: string) => string;\n          patch?: (json: any, url: string) => void | Promise<void>;\n          patchInternalModel?: (internalModel: any) => void | Promise<void>;\n        }> = [\n          {\n            search: \"\u9B42\u5668\u5B66\u9662\",\n            replace(jsonText: string) {\n              return jsonText.replace(/mtn\"([^,])/gm, 'mtn\",\"$1');\n            },\n          },\n          {\n            search: \"\u5C11\u5973\u524D\u7EBF\",\n            async patch(json: any, url: string) {\n              extractCubism2IdleMotions(json, [\"daiji\"]);\n              if (!json.name) {\n                json.name = folderName(\n                  url.replace(/(normal|destroy)\\.model\\.json/, \"\")\n                );\n              }\n              if (json.motions?.idle?.length) {\n                const motion0 = json.motions.idle[0] || {};\n                if (motion0.file && motion0.file.startsWith(\"daiji\")) {\n                  const ok = await ping(urlUtils.resolve(url, motion0.file));\n                  if (!ok) motion0.file = \"motions/\" + motion0.file;\n                }\n              }\n            },\n          },\n          {\n            search: \"\u30A2\u30F3\u30CE\u30A6\u30F3\u30D6\u30E9\u30A4\u30C9\",\n            async patch(json: any, url: string) {\n              if (json.FileReferences?.Textures?.length === 0) {\n                const exists = await ping(\n                  urlUtils.resolve(url, \"textures/texture_00.png\")\n                );\n                json.FileReferences.Textures.push(\n                  exists\n                    ? \"textures/texture_00.png\"\n                    : \"textures/texture_00 .png\"\n                );\n              }\n              extractCubism4IdleMotions(json, [\"home\", \"gacha\"]);\n            },\n          },\n          {\n            search: \"\u51CD\u4EAC\",\n            async patch(json: any, url: string) {\n              const correctTexture = async (tex: string) =>\n                (await ping(urlUtils.resolve(url, tex)))\n                  ? tex\n                  : tex.replace(\"/texture\", \"/android/texture\");\n              if (\n                Cubism2ModelSettings &&\n                Cubism2ModelSettings.isValidJSON?.(json)\n              ) {\n                if (json.textures)\n                  json.textures = await Promise.all(\n                    json.textures.map(correctTexture)\n                  );\n                if (json.motions) {\n                  for (const grp of Object.values(json.motions) as any[][]) {\n                    if (grp?.length)\n                      for (const m of grp) {\n                        m.file = m.file ?? m.File;\n                        delete m.File;\n                      }\n                  }\n                  if (!json.motions.idle?.length && json.motions[\"\"]) {\n                    json.motions.idle = json.motions[\"\"].filter(\n                      (m: any) => m.file && m.file.includes(\"loop\")\n                    );\n                  }\n                }\n              } else if (\n                Cubism4ModelSettings &&\n                Cubism4ModelSettings.isValidJSON?.(json)\n              ) {\n                if (json.FileReferences?.Textures)\n                  json.FileReferences.Textures = await Promise.all(\n                    json.FileReferences.Textures.map(correctTexture)\n                  );\n                if (json.FileReferences?.Motions) {\n                  if (\n                    !json.FileReferences.Motions.Idle?.length &&\n                    json.FileReferences.Motions[\"\"]\n                  ) {\n                    json.FileReferences.Motions.Idle =\n                      json.FileReferences.Motions[\"\"].filter(\n                        (m: any) => m.File && m.File.includes(\"loop\")\n                      );\n                  }\n                }\n              }\n            },\n          },\n          {\n            search: \"\u5929\u547D\u4E4B\u5B50\",\n            patch(json: any) {\n              if (json.motions?.[\"\"]?.length && !json.motions?.idle?.length)\n                json.motions.idle = json.motions[\"\"].map((m: any) => ({\n                  ...m,\n                }));\n            },\n          },\n          {\n            search: \"\u78A7\u84DD\u822A\u7EBF\",\n            patch(json: any) {\n              extractCubism4IdleMotions(json, [\"idle\"]);\n            },\n          },\n          {\n            search: \"\u5C11\u5973\u5496\u5561\u67AA\",\n            patch(json: any) {\n              extractCubism4IdleMotions(json, [\"stand\"]);\n            },\n            patchInternalModel(internalModel: any) {\n              for (const prop of Object.keys(internalModel))\n                if (prop.startsWith(\"idParam\"))\n                  (internalModel as any)[prop] = snakeCaseUpper(\n                    (internalModel as any)[prop]\n                  );\n            },\n          },\n          {\n            search: \"princesses\",\n            patch(json: any) {\n              extractCubism2IdleMotions(json, [\"default\", \"loop\"]);\n            },\n          },\n          {\n            search: \"\u5D29\u574F\",\n            patch(json: any) {\n              removeSoundDefs(json);\n              if (json.name === \"\") delete json.name;\n            },\n          },\n          {\n            search: \"\u6218\u8230\u5C11\u5973\",\n            patch(json: any) {\n              removeSoundDefs(json);\n            },\n          },\n          {\n            search: \"\u673A\u52A8\u6218\u961F\",\n            patch(json: any) {\n              removeSoundDefs(json);\n            },\n          },\n          {\n            search: \"\u8BFA\u4E9A\u5E7B\u60F3\",\n            patch(json: any) {\n              if (json.name === \"model\") delete json.name;\n            },\n          },\n        ];\n\n        function folderName(url: string) {\n          try {\n            const u = new URL(url);\n            const parts = u.pathname.split(\"/\").filter(Boolean);\n            return parts.slice(-2, -1)[0] || \"\";\n          } catch {\n            return \"\";\n          }\n        }\n\n        function replaceJSONText(jsonText: string, url: string) {\n          for (const p of patches)\n            if (url.includes(encodeURI(p.search)) && p.replace)\n              jsonText = p.replace(jsonText, url);\n          return jsonText;\n        }\n        async function patchJSON(json: any, url: string) {\n          for (const p of patches)\n            if (url.includes(encodeURI(p.search)) && p.patch)\n              await p.patch(json, url);\n        }\n        async function patchInternalModel(internalModel: any) {\n          const url: string = internalModel?.settings?.url || \"\";\n          for (const p of patches)\n            if (url.includes(encodeURI(p.search)) && p.patchInternalModel)\n              await p.patchInternalModel(internalModel);\n        }\n\n        // tolerant JSON parse: try JSON.parse; attempt simple comma fix fallback\n        function tolerantParse(text: string) {\n          try {\n            return JSON.parse(text);\n          } catch {}\n          try {\n            const fixed = text\n              .replace(/\\r\\n/g, \"\\n\")\n              .replace(/,\\s*(\\}|\\])/g, \"$1\");\n            return JSON.parse(fixed);\n          } catch {}\n          return JSON.parse(text); // let it throw\n        }\n\n        // Replace urlToJSON\n        try {\n          const orig = Live2DFactory.urlToJSON;\n          const arr =\n            Live2DFactory.live2DModelMiddlewares ||\n            Live2DFactory.middlewares ||\n            [];\n          const idxU = arr.indexOf(orig);\n          const urlToJSON = async (context: any, next: any) => {\n            if (typeof context.source === \"string\") {\n              const url: string = context.source;\n              let json: any;\n              if (/\\.(moc|moc3)(\\?|$)/i.test(url)) {\n                // synth settings from moc path minimal\n                const isV3 = /\\.moc3(\\?|$)/i.test(url);\n                const base = url.replace(/[^/]+$/, \"\");\n                if (isV3) {\n                  json = {\n                    url: urlUtils.resolve(url, \"dummy.model3.json\"),\n                    FileReferences: { Moc: url, Textures: [], Motions: {} },\n                  };\n                } else {\n                  json = {\n                    url: urlUtils.resolve(url, \"dummy.model.json\"),\n                    model: url,\n                    textures: [],\n                    motions: {},\n                  };\n                }\n              } else {\n                let text = await fetch(url).then((r) => r.text());\n                text = replaceJSONText(text, url);\n                json = tolerantParse(text);\n                json.url = url;\n              }\n              await patchJSON(json, url);\n              setSingleMotionAsIdle(json);\n              context.source = json;\n              try {\n                context.live2dModel &&\n                  context.live2dModel.emit &&\n                  context.live2dModel.emit(\"settingsJSONLoaded\", json);\n              } catch {}\n            }\n            return next();\n          };\n          if (idxU >= 0) arr[idxU] = urlToJSON;\n          else Live2DFactory.urlToJSON = urlToJSON;\n        } catch {}\n\n        // Patch InternalModel.init\n        try {\n          const origInit = InternalModel.prototype.init;\n          InternalModel.prototype.init = async function patchedInit() {\n            try {\n              await patchInternalModel(this);\n            } catch {}\n            return origInit.apply(this, arguments as any);\n          };\n        } catch {}\n\n        // helpers used by patches\n        function setSingleMotionAsIdle(json: any) {\n          const motions =\n            json && json.FileReferences && json.FileReferences.Motions;\n          if (\n            motions &&\n            !(motions.Idle || [])[0] &&\n            Array.isArray(motions[\"\"]) &&\n            motions[\"\"].length === 1\n          ) {\n            motions.Idle = motions[\"\"].map((m: any) => ({ ...m }));\n          }\n        }\n        function extractCubism2IdleMotions(json: any, keywords: string[]) {\n          if (json && json.motions) {\n            const idle: any[] = [];\n            for (const [group, motions] of Object.entries(\n              json.motions as any\n            )) {\n              if (group !== \"idle\" && Array.isArray(motions)) {\n                for (const motion of motions as any[])\n                  for (const kw of keywords)\n                    if (\n                      motion.file &&\n                      String(motion.file).toLowerCase().includes(kw)\n                    )\n                      idle.push(motion);\n              }\n            }\n            if (idle.length)\n              json.motions.idle = unionBy(json.motions.idle, idle, \"file\");\n          }\n        }\n        function extractCubism4IdleMotions(json: any, keywords: string[]) {\n          const ref =\n            json && json.FileReferences && json.FileReferences.Motions;\n          if (ref) {\n            const idle: any[] = [];\n            for (const [group, motions] of Object.entries(ref as any)) {\n              if (group !== \"Idle\" && Array.isArray(motions)) {\n                for (const motion of motions as any[])\n                  for (const kw of keywords)\n                    if (\n                      motion.File &&\n                      String(motion.File).toLowerCase().includes(kw)\n                    )\n                      idle.push(motion);\n              }\n            }\n            if (idle.length) ref.Idle = unionBy(ref.Idle, idle, \"File\");\n          }\n        }\n        function removeSoundDefs(json: any) {\n          if (json && json.motions) {\n            for (const grp of Object.values(json.motions as any))\n              if (Array.isArray(grp))\n                for (const m of grp as any[]) m.sound = undefined;\n          }\n        }\n      }\n\n      // Load model from query if provided, otherwise from saved last model\n\n      // Read last model from main-process file first, fallback to localStorage\n      let saved = null;\n      try {\n        if (\n          window.overlayAPI &&\n          typeof window.overlayAPI.getLastModel === \"function\"\n        ) {\n          try {\n            saved = await window.overlayAPI.getLastModel();\n          } catch {}\n        }\n        if (!saved) {\n          saved = localStorage.getItem(LAST_MODEL_KEY) || null;\n        }\n      } catch (e) {\n        saved = null;\n      }\n      const initial =\n        saved &&\n        (/\\.json($|\\?)/i.test(saved) ||\n          /\\.moc3($|\\?)/i.test(saved) ||\n          /\\.moc($|\\?)/i.test(saved))\n          ? saved\n          : MODELS[0];\n      if (ghAvalible != false) {\n        await loadSelectedModel(initial);\n      } else {\n        await loadSelectedModel(MODELS[1]);\n      }\n\n      // Persist selection when user navigates to viewer via button\n      // select.addEventListener(\"change\", () => {\n      //   const url = select.value;\n      //   try { localStorage.setItem(LAST_MODEL_KEY, url); } catch {}\n      //   try { window.overlayAPI?.saveLastModel?.(url); } catch {}\n      //   loadSelectedModel(url);\n      // });\n\n      // Inspector logic (GitHub API directory browser)\n      const modal = document.getElementById(\"modelInspector\");\n      const listEl = document.getElementById(\"inspectorList\");\n      const breadcrumbEl = document.getElementById(\"inspectorBreadcrumb\");\n      const urlInput = document.getElementById(\"inspectorUrl\");\n      const loadUrlBtn = document.getElementById(\"inspectorLoadUrl\");\n\n      let currentPath = \"\"; // path within repo\n      let selectedModelPath = \"\"; // repo path to selected .model3.json\n\n      function encodeRepoPath(path) {\n        return (path || \"\")\n          .split(\"/\")\n          .map((seg) => encodeURIComponent(seg))\n          .join(\"/\");\n      }\n      function pathToJsDelivr(repoPath, ref) {\n        const encoded = encodeRepoPath(repoPath);\n        const suffix = ref ? \"@\" + ref : \"\";\n        return (\n          \"https://cdn.jsdelivr.net/gh/Eikanya/Live2d-model\" +\n          suffix +\n          \"/\" +\n          encoded\n        );\n      }\n      function pathToRaw(repoPath, ref) {\n        const encoded = encodeRepoPath(repoPath);\n        const branch = ref || \"master\";\n        return (\n          \"https://raw.githubusercontent.com/Eikanya/Live2d-model/\" +\n          branch +\n          \"/\" +\n          encoded\n        );\n      }\n      async function resolveModelUrl(repoPath) {\n        const tries = [\n          pathToJsDelivr(repoPath, \"master\"),\n          pathToJsDelivr(repoPath, \"v1.0.0\"),\n          pathToRaw(repoPath, \"master\"),\n          pathToRaw(repoPath, \"v1.0.0\"),\n        ];\n        for (const url of tries) {\n          try {\n            const r = await fetch(url, { method: \"HEAD\" });\n            if (r.ok) return url;\n          } catch {}\n        }\n        // fallback to raw master without HEAD check\n        return pathToRaw(repoPath, \"master\");\n      }\n\n      // Prebuilt models index to avoid GitHub API limits\n      const INDEX_URL =\n        \"https://guansss.github.io/live2d-viewer-web/eikanyalive2d-model.json\";\n      let modelIndexRoot = null;\n      let modelInfoMap = null;\n      let indexPathMap = {};\n      async function ensureIndexLoaded() {\n        if (modelIndexRoot && modelInfoMap) return;\n        const resp = await fetch(INDEX_URL);\n        if (!resp.ok) throw new Error(\"Failed to load model index\");\n        const data = await resp.json();\n        modelIndexRoot = data.models;\n        modelInfoMap = {};\n        for (const k of Object.keys(data)) {\n          if (k !== \"models\") modelInfoMap[k] = data[k];\n        }\n        // build path map for robust lookup\n        indexPathMap = {};\n        (function build(node, prefix) {\n          const path = prefix || \"\";\n          indexPathMap[path] = node;\n          const children = (node && node.children) || [];\n          for (const ch of children) {\n            if (!ch || !ch.name) continue;\n            const next = path ? path + \"/\" + ch.name : ch.name;\n            build(ch, next);\n          }\n        })(modelIndexRoot, \"\");\n      }\n      function indexRootName() {\n        return (\n          (modelIndexRoot && modelIndexRoot.name) || \"Eikanya/Live2d-model\"\n        );\n      }\n      function findIndexNode(path) {\n        return indexPathMap[path || \"\"] || null;\n      }\n      function listDirFromIndex(path) {\n        const node = findIndexNode(path);\n        return {\n          dirs: (node && node.children) || [],\n          files: (node && node.files) || [],\n        };\n      }\n      function buildRepoPath(path, name) {\n        return (path ? path + \"/\" : \"\") + name;\n      }\n      async function buildSyntheticCubism2Json(repoPathToMoc) {\n        const key = indexRootName() + \"/\" + repoPathToMoc;\n        const meta = modelInfoMap[key] || {};\n        const dir = repoPathToMoc.replace(/\\/?[^/]*$/, \"\");\n        const modelUrl = await resolveModelUrl(repoPathToMoc);\n        const textures = Array.isArray(meta.textures)\n          ? meta.textures\n          : [\"texture_00.png\"];\n        const motionsObj = {};\n        if (meta.motions) {\n          for (const g of Object.keys(meta.motions)) {\n            motionsObj[g] = (meta.motions[g] || []).map((m) => ({\n              file: m,\n            }));\n          }\n        }\n        const absTextures = [];\n        for (const t of textures)\n          absTextures.push(await resolveModelUrl((dir ? dir + \"/\" : \"\") + t));\n        const absPhysics = meta.physics\n          ? await resolveModelUrl((dir ? dir + \"/\" : \"\") + meta.physics)\n          : undefined;\n        const json = { model: modelUrl, textures: absTextures };\n        if (absPhysics) json.physics = absPhysics;\n        if (Object.keys(motionsObj).length) json.motions = motionsObj;\n        return (\n          \"data:application/json;charset=utf-8,\" +\n          encodeURIComponent(JSON.stringify(json))\n        );\n      }\n\n      // function renderBreadcrumb(path) {\n      //   const parts = path ? path.split(\"/\") : [];\n      //   const frag = document.createDocumentFragment();\n      //   const rootLink = document.createElement(\"a\");\n      //   rootLink.href = \"#\";\n      //   rootLink.textContent = \"root\";\n      //   rootLink.style.color = \"#9cdcfe\";\n      //   rootLink.addEventListener(\"click\", (e) => {\n      //     e.preventDefault();\n      //     loadDir(\"\");\n      //   });\n      //   frag.appendChild(rootLink);\n      //   let acc = \"\";\n      //   parts.forEach((p, idx) => {\n      //     const sep = document.createElement(\"span\");\n      //     sep.textContent = \" / \";\n      //     frag.appendChild(sep);\n      //     acc = acc ? acc + \"/\" + p : p;\n      //     const a = document.createElement(\"a\");\n      //     a.href = \"#\";\n      //     a.textContent = p;\n      //     a.style.color = \"#9cdcfe\";\n      //     a.addEventListener(\"click\", (e) => {\n      //       e.preventDefault();\n      //       loadDir(acc);\n      //     });\n      //     frag.appendChild(a);\n      //   });\n      //   breadcrumbEl.innerHTML = \"\";\n      //   breadcrumbEl.appendChild(frag);\n      // }\n\n      // Pomodoro + RPG logic\n\n      ///MAIN FLOW///\n\n      (function () {\n        const TIMER_WORK_DEFAULT = 25 * 60; // seconds\n        const TIMER_BREAK_DEFAULT = 5 * 60;\n        let workDuration = TIMER_WORK_DEFAULT;\n        let breakDuration = TIMER_BREAK_DEFAULT;\n        let timeLeft = workDuration;\n        let running = false;\n        let mode = \"work\"; // 'work' or 'break'\n\n        // RPG stats\n        const stateKey = \"anime_overlay_rpg_v1\";\n        let state = { level: 1, xp: 0, tomatoes: 0 };\n        try {\n          const saved = localStorage.getItem(stateKey);\n          if (saved) state = JSON.parse(saved);\n        } catch (e) {}\n\n        const $ = (id) => document.getElementById(id);\n        // UI toggle helpers\n        const controlsWrap = $(\"controls\");\n        const toggleUIBtn = $(\"toggleUI\");\n        const showUIBtn = $(\"showUIBtn\");\n        const UI_HIDDEN_KEY = \"anime_overlay_ui_hidden_v1\";\n        function setUIHidden(hidden) {\n          try {\n            if (!controlsWrap || !showUIBtn) return;\n            if (hidden) {\n              controlsWrap.classList.add(\"hidden\");\n              showUIBtn.classList.remove(\"hidden\");\n              localStorage.setItem(UI_HIDDEN_KEY, \"1\");\n            } else {\n              controlsWrap.classList.remove(\"hidden\");\n              showUIBtn.classList.add(\"hidden\");\n              localStorage.setItem(UI_HIDDEN_KEY, \"0\");\n            }\n          } catch {}\n        }\n        try {\n          const saved = localStorage.getItem(UI_HIDDEN_KEY) || \"0\";\n          setUIHidden(saved === \"1\");\n        } catch {}\n        try {\n          if (toggleUIBtn)\n            toggleUIBtn.addEventListener(\"click\", () => {\n              const hidden =\n                controlsWrap && controlsWrap.classList.contains(\"hidden\");\n              setUIHidden(!hidden);\n            });\n          if (showUIBtn)\n            showUIBtn.addEventListener(\"click\", () => setUIHidden(false));\n        } catch {}\n        const timerDisplay = $(\"timerDisplay\");\n        const timerLabel = $(\"timerLabel\");\n        const startBtn = $(\"startBtn\");\n        const pauseBtn = $(\"pauseBtn\");\n        const resetBtn = $(\"resetBtn\");\n        const levelEl = $(\"level\");\n        const xpEl = $(\"xp\");\n        const tomatoesEl = $(\"tomatoes\");\n\n        function saveState() {\n          try {\n            localStorage.setItem(stateKey, JSON.stringify(state));\n          } catch (e) {}\n        }\n        function formatTime(s) {\n          const mm = Math.floor(s / 60);\n          const ss = s % 60;\n          return (\n            String(mm).padStart(2, \"0\") + \":\" + String(ss).padStart(2, \"0\")\n          );\n        }\n        function updateUI() {\n          timerDisplay.textContent = formatTime(timeLeft);\n          timerLabel.textContent = mode === \"work\" ? \"\u0420\u0430\u0431\u043E\u0442\u0430\" : \"\u041F\u0435\u0440\u0435\u0440\u044B\u0432\";\n          levelEl.textContent = state.level;\n          xpEl.textContent = state.xp;\n          tomatoesEl.textContent = state.tomatoes;\n        }\n\n        function rewardForWork() {\n          state.xp += 10;\n          state.tomatoes += 1;\n          if (state.xp >= state.level * 100) {\n            state.xp -= state.level * 100;\n            state.level += 1; // level up\n            // celebration animation\n            pulseModel(1.3, 600);\n            toast(\"\u0423\u0440\u043E\u0432\u0435\u043D\u044C \u043F\u043E\u0432\u044B\u0448\u0435\u043D!\");\n            speakCategory(\"xp\");\n          } else {\n            pulseModel(1.1, 400);\n          }\n          saveState();\n          updateUI();\n        }\n\n        function toast(msg) {\n          const t = document.createElement(\"div\");\n          t.textContent = msg;\n          t.style.position = \"absolute\";\n          t.style.left = \"8px\";\n          t.style.bottom = \"8px\";\n          t.style.background = \"rgba(0,0,0,0.6)\";\n          t.style.color = \"white\";\n          t.style.padding = \"6px\";\n          t.style.borderRadius = \"6px\";\n          t.style.zIndex = \"30\";\n          document.body.appendChild(t);\n          setTimeout(() => t.remove(), 2500);\n        }\n\n        function pulseModel(scale, to) {\n          const m = getModel();\n          if (!m) return;\n          const start = m.scale.x;\n          const target = scale;\n          const dur = to || 400;\n          const origX = m.x;\n          const origY = m.y;\n          const t0 = Date.now();\n          const tick = () => {\n            const p = Math.min(1, (Date.now() - t0) / dur);\n            const val = start + (target - start) * Math.sin(p * Math.PI);\n            m.scale.set(val);\n            // restore position to avoid shift when scaling\n            m.x = origX;\n            m.y = origY;\n            if (p < 1) requestAnimationFrame(tick);\n            else m.scale.set(start);\n          };\n          requestAnimationFrame(tick);\n        }\n\n        function tryStartRandomMotion(preferredGroup) {\n          const m = getModel();\n          if (!m) return false;\n          try {\n            // Try common APIs from different Live2D wrappers\n            const groups = [\n              preferredGroup,\n              \"TapBody\",\n              \"TapHand\",\n              \"TapHead\",\n              \"Idle\",\n            ];\n            // 1) PIXI-live2d-display exposes model.motion(name) in some versions\n            if (typeof m.motion === \"function\") {\n              for (const g of groups) {\n                try {\n                  if (g) {\n                    m.motion(g);\n                    return true;\n                  }\n                } catch (e) {}\n              }\n            }\n            // 2) internalModel.motionManager.startRandomMotion(group)\n            if (m.internalModel && m.internalModel.motionManager) {\n              const manager = m.internalModel.motionManager;\n              if (typeof manager.startRandomMotion === \"function\") {\n                for (const g of groups) {\n                  try {\n                    if (g) {\n                      manager.startRandomMotion(g);\n                      toast(\"\u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F: \" + g); // Added debug toast\n                      return true;\n                    } else {\n                      manager.startRandomMotion();\n                      toast(\"\u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F: default\"); // Added debug toast\n                      return true;\n                    }\n                  } catch (e) {}\n                }\n              }\n              // 3) startMotion (group, index) fallback\n              if (typeof manager.startMotion === \"function\") {\n                for (const g of groups) {\n                  try {\n                    manager.startMotion(g || \"\");\n                    return true;\n                  } catch (e) {}\n                }\n              }\n            }\n            // 4) model.internalModel.startRandomMotion (other wrappers)\n            if (\n              m.internalModel &&\n              typeof m.internalModel.startRandomMotion === \"function\"\n            ) {\n              try {\n                m.internalModel.startRandomMotion(preferredGroup);\n                return true;\n              } catch (e) {}\n            }\n\n            // fallback gentle pulse\n            pulseModel(1.08, 300);\n            return true;\n          } catch (e) {\n            console.error(\"tryStartRandomMotion failed\", e);\n            pulseModel(1.05, 250);\n            return false;\n          }\n        }\n\n        function playRandomNonIdle() {\n          if (!getModel() || !motionEntries.length) return;\n          const candidates = motionEntries.filter((m) => {\n            const g = String(m.group || \"\").toLowerCase();\n            const f = String(m.file || \"\").toLowerCase();\n            return g !== \"idle\" && !f.includes(\"idle\");\n          });\n          const list = candidates.length ? candidates : motionEntries;\n          const pick = list[Math.floor(Math.random() * list.length)];\n          try {\n            const mm =\n              getModel().internalModel &&\n              getModel().internalModel.motionManager;\n            const pr = getForcePriority();\n            if (mm && typeof mm.startMotion === \"function\")\n              mm.startMotion(pick.group, pick.index, pr);\n            else if (mm && typeof mm.startRandomMotion === \"function\")\n              mm.startRandomMotion(pick.group, pr);\n          } catch (e) {}\n        }\n\n        function interruptAndPlayRandomNonIdle() {\n          const m = getModel();\n          if (!m) return;\n\n          const tryRuntimeGroups = () => {\n            try {\n              const mmFallback =\n                m && m.internalModel && m.internalModel.motionManager;\n              const defs =\n                mmFallback &&\n                (mmFallback.definitions ||\n                  mmFallback._definitions ||\n                  mmFallback._motions);\n              if (defs && Object.keys(defs).length) {\n                const groups = Object.keys(defs).filter(\n                  (g) =>\n                    String(g || \"\").toLowerCase() !== \"idle\" &&\n                    String(g || \"\").length > 0\n                );\n                if (groups.length) {\n                  const g = groups[Math.floor(Math.random() * groups.length)];\n                  const pr = getForcePriority();\n                  if (typeof mmFallback.startRandomMotion === \"function\") {\n                    mmFallback.startRandomMotion(g, pr);\n                    return true;\n                  }\n                  if (typeof mmFallback.startMotion === \"function\") {\n                    mmFallback.startMotion(g, 0, pr);\n                    return true;\n                  }\n                }\n              }\n            } catch (e) {}\n            return false;\n          };\n\n          const stopCurrent = () => {\n            try {\n              const mm = m.internalModel && m.internalModel.motionManager;\n              if (mm) {\n                if (typeof mm.stopAllMotions === \"function\")\n                  mm.stopAllMotions();\n                else if (\n                  mm._motionQueueManager &&\n                  typeof mm._motionQueueManager.stopAllMotions === \"function\"\n                )\n                  mm._motionQueueManager.stopAllMotions();\n              }\n            } catch (e) {}\n          };\n\n          const tryModelConvenience = () => {\n            try {\n              if (typeof m.motion === \"function\") {\n                const groups = [\"TapBody\", \"TapHead\", \"Tap\", \"Body\", \"Idle\"];\n                for (const g of groups) {\n                  try {\n                    m.motion(g);\n                    return true;\n                  } catch (e) {}\n                }\n              }\n            } catch (e) {}\n            return false;\n          };\n\n          let attempts = 5;\n          const tryStart = () => {\n            // stop whatever is running\n            stopCurrent();\n            // 1) use parsed entries\n            if (\n              Array.isArray(getmotionEntries()) &&\n              getmotionEntries().length\n            ) {\n              playRandomNonIdle();\n              snoozeIdle(6000);\n              return;\n            }\n            // 2) use runtime groups\n            if (tryRuntimeGroups()) {\n              snoozeIdle(6000);\n              return;\n            }\n            // 3) last resort: try generic triggers via helper\n            try {\n              if (typeof tryStartRandomMotion === \"function\") {\n                const ok = tryStartRandomMotion(\"TapBody\");\n                if (ok) {\n                  snoozeIdle(6000);\n                  return;\n                }\n              }\n            } catch (e) {}\n            // 4) model.motion convenience if available\n            if (tryModelConvenience()) {\n              snoozeIdle(6000);\n              return;\n            }\n            if (attempts-- > 0) setTimeout(tryStart, 200);\n          };\n          tryStart();\n        }\n\n        function focusModel() {\n          const m = getModel();\n          if (!m) return;\n          m.scale.set(0.55);\n        }\n        function relaxModel() {\n          const m = getModel();\n          if (!m) return;\n          m.scale.set(0.65);\n        }\n\n        let timerInterval = null;\n        function startTimer() {\n          if (running) return;\n          running = true;\n          startBtn.disabled = true;\n          pauseBtn.disabled = false;\n          // no model zoom on timer start\n          speakCategory(\"start\");\n          // ensure animation triggers even if audio is blocked\n          interruptAndPlayRandomNonIdle();\n          timerInterval = setInterval(() => {\n            timeLeft--;\n            if (timeLeft <= 0) {\n              clearInterval(timerInterval);\n              running = false;\n              startBtn.disabled = false;\n              pauseBtn.disabled = true;\n              completeSession();\n            }\n            updateUI();\n          }, 1000);\n        }\n        function pauseTimer() {\n          if (!running) return;\n          running = false;\n          clearInterval(timerInterval);\n          startBtn.disabled = false;\n          pauseBtn.disabled = true;\n          speakCategory(\"break\");\n          interruptAndPlayRandomNonIdle();\n        }\n        function resetTimer() {\n          pauseTimer();\n          mode = \"work\";\n          workDuration = TIMER_WORK_DEFAULT;\n          breakDuration = TIMER_BREAK_DEFAULT;\n          timeLeft = workDuration;\n          updateUI();\n        }\n\n        function completeSession() {\n          if (mode === \"work\") {\n            rewardForWork();\n            mode = \"break\";\n            timeLeft = breakDuration;\n            toast(\"\u041F\u0435\u0440\u0435\u0440\u044B\u0432!\"); // model reaction\n            speakCategory(\"break\");\n            try {\n              const m = getModel();\n              if (\n                m &&\n                m.internalModel &&\n                m.internalModel.motionManager &&\n                m.internalModel.motionManager.startRandomMotion\n              )\n                m.internalModel.motionManager.startRandomMotion(\"Relax\");\n            } catch (e) {}\n          } else {\n            mode = \"work\";\n            timeLeft = workDuration;\n            toast(\"\u0412\u0440\u0435\u043C\u044F \u0440\u0430\u0431\u043E\u0442\u0430\u0442\u044C!\");\n            speakCategory(\"finish\");\n          }\n          updateUI();\n        }\n\n        // clicks on model grant small XP\n        const modelDiv = $(\"model\");\n        modelDiv.addEventListener(\"click\", () => {\n          state.xp += 1;\n          saveState();\n          updateUI();\n          toast(\"+1 XP\");\n        });\n\n        startBtn.addEventListener(\"click\", startTimer);\n        pauseBtn.addEventListener(\"click\", pauseTimer);\n        resetBtn.addEventListener(\"click\", resetTimer);\n\n        // initialize UI\n        timeLeft = workDuration;\n        updateUI();\n        pauseBtn.disabled = true;\n        startBtn.disabled = false;\n        // controls\n        const pinBtn = document.getElementById(\"pin\");\n        const opacityInput = document.getElementById(\"opacity\");\n        let pinned = false;\n        pinBtn.addEventListener(\"click\", async () => {\n          pinned = !pinned;\n          pinBtn.textContent = pinned ? \"Pinned\" : \"Pin\";\n          if (window.overlayAPI)\n            await window.overlayAPI.toggleClickThrough(pinned);\n        });\n\n        opacityInput.addEventListener(\"input\", () => {\n          try {\n            const m = getModel();\n            const base =\n              (window as any).__live2d_base_scale || (m ? m.scale.x : 1);\n            const factor = Math.max(\n              0.01,\n              Math.min(1.5, Number((opacityInput as HTMLInputElement).value))\n            );\n            if (m && isFinite(base)) {\n              const origX = m.x;\n              const origY = m.y;\n              m.scale.set(factor / 2);\n              m.x = origX;\n              m.y = origY;\n              try {\n                m.__userScaled = true;\n              } catch {}\n              try {\n                saveModelState();\n              } catch {}\n            }\n          } catch {}\n        });\n\n        // subscribe to extension events (deduped)\n        if (window.overlayAPI && window.overlayAPI.onEvent) {\n          const processed = new Set();\n          window.overlayAPI.onEvent((data) => {\n            try {\n              if (!data || !data.type) return;\n              const key = [\n                data.type,\n                data.path || \"\",\n                data.timestamp || \"\",\n              ].join(\"|\");\n              if (processed.has(key)) return;\n              processed.add(key);\n\n              if (data.type === \"save\") {\n                const chars = typeof data.chars === \"number\" ? data.chars : 0;\n                let gain = 0;\n                if (chars > 0) gain = Math.max(1, Math.ceil(chars / 10));\n                if (gain > 0) {\n                  state.xp += gain;\n                  saveState();\n                  updateUI();\n                  toast(\"\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043E: +\" + gain + \" XP (\" + chars + \" chars)\");\n                  speakCategory(\"xp\");\n                  playRandomNonIdle();\n                } else {\n                  // no XP for zero-chars save\n                  toast(\"\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043E (\u0431\u0435\u0437 XP)\");\n                }\n              } else if (data.type === \"edit\") {\n                // edits don't grant XP until saved; just react\n                saveState();\n                updateUI();\n                toast(\"\u041F\u0440\u0430\u0432\u043A\u0430\");\n                playRandomNonIdle();\n                if (Math.random() < 0.1) speakCategory(\"fun\");\n              } else if (data.type === \"focus\") {\n                focusModel();\n                toast(\"\u0424\u043E\u043A\u0443\u0441 \u043D\u0430 \u0444\u0430\u0439\u043B\u0435\");\n              }\n            } catch (e) {\n              console.error(\"onEvent handler\", e);\n            }\n          });\n        }\n      })();\n    } catch (e) {\n      console.error(\"Live2D load error\", e);\n      const el = document.getElementById(\"model\");\n      el.textContent =\n        \"\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043C\u043E\u0434\u0435\u043B\u0438: \" + (e && e.message ? e.message : e);\n      // \u043F\u043E\u043F\u044B\u0442\u0430\u0442\u044C\u0441\u044F \u043F\u043E\u043A\u0430\u0437\u0430\u0442\u044C fallback \u0438\u0437 \u043B\u043E\u043A\u0430\u043B\u044C\u043D\u044B\u0445 \u0430\u0441\u0441\u0435\u0442\u043E\u0432\n      const img = document.createElement(\"img\");\n      img.style.width = \"100%\";\n      img.style.height = \"100%\";\n      img.src = \"./img/demo.gif\";\n      el.appendChild(img);\n    }\n  })();\n} else {\n  // If loaded on a page without the main UI, export a no-op app to avoid\n  // runtime errors from other modules that import `app`.\n  // `app` is already exported above; if DOM isn't present we simply skip init.\n}\n"],
  "mappings": "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",
  "names": ["model", "fitModelToCanvas", "model", "fitModelToCanvas", "motionEntries", "getAlternativeURL", "app", "model", "saveModelState", "MODELS", "LAST_MODEL_KEY", "ping", "setMouthOpenParam", "getAudio", "playAudioCategory", "getForcePriority", "ensureAudioContext", "lipSyncState", "startLipSyncForAudio", "model", "playRandomNonIdle", "interruptAndPlayRandomNonIdle", "snoozeIdle", "speakCategory", "stopLipSync", "refreshAnimationsUI", "playSelectedAnimationGroup", "getMotionEntriesFromJson", "startIdleLoop", "startIdleLoopC4", "currentRuntime", "applyPixiLive2dPatches", "encodeRepoPath", "pathToJsDelivr", "pathToRaw", "indexRootName", "findIndexNode", "listDirFromIndex", "buildRepoPath", "startLipSync", "resolveModelUrl", "ensureIndexLoaded", "buildSyntheticCubism2Json", "saved"]
}
